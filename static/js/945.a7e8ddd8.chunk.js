"use strict";(self.webpackChunkprojectteam7=self.webpackChunkprojectteam7||[]).push([[945],{8945:function(e,t,i){i.r(t),i.d(t,{default:function(){return Q}});var n=i(2791),r=i(9434),c="AddRecipePage_section__QxQ23",a="AddRecipePage_container__uC-B6",s="AddRecipePage_title__FKZqh",d=i(3433),l=i(9439),o=i(7689),p=i(8813),u={noScroll:"addRecipeForm_noScroll__eO3AL",conteiner:"addRecipeForm_conteiner__6kfsw",addForm:"addRecipeForm_addForm__hxaQ9",recipePhoto:"addRecipeForm_recipePhoto__lRoeB",recipeImg:"addRecipeForm_recipeImg__DHZE4",addPhotoBtn:"addRecipeForm_addPhotoBtn__W6lR4",addPhotoBtnText:"addRecipeForm_addPhotoBtnText__b6wdZ",changePhotoBtnText:"addRecipeForm_changePhotoBtnText__EmrBy",file:"addRecipeForm_file__37GkQ",inputField:"addRecipeForm_inputField__LtXrZ",inputWrapper:"addRecipeForm_inputWrapper__s+lmf",inputText:"addRecipeForm_inputText__NkLkv",inputSelectText:"addRecipeForm_inputSelectText__2IxPO",inputSelect:"addRecipeForm_inputSelect__VXv04",inputIngrField:"addRecipeForm_inputIngrField__t2LF7",ingredientsTitle:"addRecipeForm_ingredientsTitle__kgf9b",ingredientsCountField:"addRecipeForm_ingredientsCountField__UUnIA",IngrFieldWrapper:"addRecipeForm_IngrFieldWrapper__uXIQ9",fieldAddDeleteBtn:"addRecipeForm_fieldAddDeleteBtn__QUBLN",ingredientList:"addRecipeForm_ingredientList__11ZaP",ingredientItem:"addRecipeForm_ingredientItem__h7TuF",selectWrapper:"addRecipeForm_selectWrapper__YJzQ+",instructionsfield:"addRecipeForm_instructionsfield__39boy",submitBtn:"addRecipeForm_submitBtn__w+0Ki"},m=i(2466),_=i(1413),h=i(5763),x={inputWrapper:"addRecipeSelectIngr_inputWrapper__rEt8K",title:"addRecipeSelectIngr_title__PpdMg addRecipeSelectIngr_inputWrapper__rEt8K",measure:"addRecipeSelectIngr_measure__1epfr addRecipeSelectIngr_inputWrapper__rEt8K",inputSelect:"addRecipeSelectIngr_inputSelect__AUlye",selectedText:"addRecipeSelectIngr_selectedText__a07fc",selectedTextActive:"addRecipeSelectIngr_selectedTextActive__FExY2",selectOptionsListWrapper:"addRecipeSelectIngr_selectOptionsListWrapper__uxIv+",selectOptionsList:"addRecipeSelectIngr_selectOptionsList__YN-Vr",selectOptionsItem:"addRecipeSelectIngr_selectOptionsItem__fDSb6"},g=i(184),f=function(e){var t=e.initValue,i=e.list,r=e.handleClick,c=e.type,a=(0,n.useState)(!1),s=(0,l.Z)(a,2),d=s[0],o=s[1],p=(0,n.useState)(t),u=(0,l.Z)(p,2),m=u[0],_=u[1];(0,n.useEffect)((function(){return document.addEventListener("mousedown",j),function(){document.removeEventListener("mousedown",j)}}),[]);var f=function(e){_(e.target.getAttribute("data-name")),o(!1),r(e.target.getAttribute("data-name"))},j=function(e){"select"!==e.target.getAttribute("name")&&o(!1)};return(0,g.jsx)("div",{className:x[c],children:t&&(0,g.jsxs)("div",{className:x.inputSelect,children:[(0,g.jsxs)("div",{name:"select",className:x.selectedText,onClick:function(){o(!d)},children:[(0,g.jsx)("p",{name:"select",children:m}),(0,g.jsx)("p",{children:(0,g.jsx)(h.RiH,{name:"select",className:d&&x.selectedTextActive})})]}),d&&(0,g.jsx)("div",{className:x.selectOptionsListWrapper,children:(0,g.jsx)("ul",{name:"select",className:x.selectOptionsList,children:i.map((function(e){return(0,g.jsx)("li",{className:x.selectOptionsItem,onClick:f,children:(0,g.jsx)("p",{"data-name":e,name:"select",children:e})},e)}))})})]})})},j=function(e){var t=e.item,i=e.ingredientsList,n=e.onChange,r=e.handleDeleteIngredient;return(0,g.jsxs)("li",{className:u.ingredientItem,children:[(0,g.jsxs)("div",{className:u.selectWrapper,children:[(0,g.jsx)(f,{type:"title",initValue:t.title,list:i,handleClick:function(e){n((0,_.Z)((0,_.Z)({},t),{},{title:e}))}}),(0,g.jsx)(f,{type:"measure",initValue:t.measure,list:["1/2 oz","1/4 oz","3/4 oz","1 oz"],handleClick:function(e){n((0,_.Z)((0,_.Z)({},t),{},{measure:e}))}})]}),(0,g.jsx)("button",{type:"button",className:u.fieldAddDeleteBtn,onClick:function(){r(t.id)},children:(0,g.jsx)(h.Q7B,{size:30})})]})},R=i(5218),v=i(2635),N=i(7320),F=i(8028),S=i(5496),A="addRecipeSelectForm_inputWrapper__CrMfn",C="addRecipeSelectForm_inputText__qJt77",I="addRecipeSelectForm_inputSelectText__jk2WY",k="addRecipeSelectForm_inputSelect__UhlU2",b="addRecipeSelectForm_selectedText__hcog0",L="addRecipeSelectForm_selectedTextActive__s9jOS",P="addRecipeSelectForm_selectOptionsListWrapper__GrQtd",T="addRecipeSelectForm_selectOptionsList__02m8C",Z="addRecipeSelectForm_selectOptionsItem__R4zUN",W=function(e){var t=e.title,i=e.item,r=e.list,c=e.handleClick,a=(0,n.useState)(!1),s=(0,l.Z)(a,2),d=s[0],o=s[1];(0,n.useEffect)((function(){return document.addEventListener("mousedown",u),function(){document.removeEventListener("mousedown",u)}}),[]);var p=function(e){c(e),o(!1)},u=function(e){"select"!==e.target.getAttribute("name")&&o(!1)};return(0,g.jsxs)("div",{className:A,children:[(0,g.jsx)("div",{className:C,children:(0,g.jsx)("p",{className:I,children:t})}),i&&(0,g.jsxs)("div",{className:k,children:[(0,g.jsxs)("div",{name:"select",className:b,onClick:function(){o(!d)},children:[(0,g.jsx)("p",{name:"select",children:i}),(0,g.jsx)("p",{children:(0,g.jsx)(h.RiH,{name:"select",className:d&&L})})]}),d&&(0,g.jsx)("div",{className:P,children:(0,g.jsx)("ul",{name:"select",className:T,children:r.map((function(e){return(0,g.jsx)("li",{className:Z,onClick:p,children:(0,g.jsx)("p",{"data-name":e,name:"select",children:e})},e)}))})})]})]})},B=i(7173),y=function(){var e=(0,r.I0)(),t=(0,r.v9)(N.rK),i=(0,o.s0)(),c=["1/2 oz","1/4 oz","3/4 oz","1 oz"],a=(0,n.useState)([]),s=(0,l.Z)(a,2),_=s[0],x=s[1];(0,n.useEffect)((function(){t&&((0,F.a5)(t).then((function(e){e.sort(),x(e)})).catch((function(e){return console.error("Error fetching ingredients:",e)})),(0,F.bS)(t).then((function(t){t.sort(),e((0,S.Zi)(t)),z(t[0])})).catch((function(e){return console.error("Error fetching categories:",e)})),(0,F.wR)(t).then((function(t){t.sort(),e((0,S.xo)(t)),K(t[0])})).catch((function(e){return console.error("Error fetching glasses:",e)})))}),[e,t]);var f=(0,r.v9)((function(e){return e.cocktail.categoriesList})),A=(0,r.v9)((function(e){return e.cocktail.glassesList})),C=[{id:1,title:_[0],measure:c[0]},{id:2,title:_[0],measure:c[0]},{id:3,title:_[0],measure:c[0]}],I=(0,n.useState)(""),k=(0,l.Z)(I,2),b=k[0],L=k[1],P=(0,n.useState)(""),T=(0,l.Z)(P,2),Z=T[0],y=T[1],w=(0,n.useState)(""),E=(0,l.Z)(w,2),O=E[0],z=E[1],D=(0,n.useState)(""),U=(0,l.Z)(D,2),Q=U[0],K=U[1],V=(0,n.useState)(""),Y=(0,l.Z)(V,2),J=Y[0],X=Y[1],q=(0,n.useState)(""),G=(0,l.Z)(q,2),M=G[0],H=G[1],$=(0,n.useState)([]),ee=(0,l.Z)($,2),te=ee[0],ie=ee[1],ne=(0,n.useState)(3),re=(0,l.Z)(ne,2),ce=re[0],ae=re[1],se=(0,n.useState)(!1),de=(0,l.Z)(se,2),le=de[0],oe=de[1],pe=(0,n.useRef)(),ue=(0,n.useRef)();!te.length&&C[0].title&&ie(C);var me=function(e){var t=e.currentTarget,i=t.name,n=t.value,r=t.files,c=t.type;if("file"!==c||null!==r&&void 0!==r&&r[0]){if(Boolean(null===r||void 0===r?void 0:r[0]))if(!(r[0].name.endsWith(".jpg")||r[0].name.endsWith(".png")||r[0].name.endsWith(".jpeg")))return alert("Only jpg/jpeg and png files are allowed!");"drink"===i?L(n):"drinkAlternate"===i?y(n):"category"===i?z(n):"glass"===i?K(n):"instructions"===i?X(n):"file"===c?H(null===r||void 0===r?void 0:r[0]):"ingredients"===i&&ie(n)}},_e=function(){L(""),y(""),z(f[0]),K(A[0]),X(""),H(""),ie(C),ae(3)},he=function(e){var t=(0,d.Z)(te),i=t.findIndex((function(t){return t.id===e.id}));t.splice(i,1,e),ie(t)},xe=function(e){if(1!==ce){var t=(0,d.Z)(te),i=t.findIndex((function(t){return t.id===e}));t.splice(i,1),ie(t),ae(ce-1)}else R.Am.error("At least 1 ingredient should be in the recipe")},ge=M&&URL.createObjectURL(M);return(0,g.jsx)(g.Fragment,{children:le?(0,g.jsx)(B.Z,{}):(0,g.jsxs)("form",{ref:pe,className:u.addForm,onSubmit:function(t){t.preventDefault(),oe(!0);var n={drink:b,drinkAlternate:Z,category:O||f[0],glass:Q||A[0],instructions:J,ingredients:te.map((function(e){return{title:e.title,measure:e.measure}}))},r=new FormData;r.append("data",JSON.stringify(n)),r.append("drinkThumb",M),e((0,m.e2)(r)).unwrap().then((function(e){var t=e._id;_e(),R.Am.success("Recipe is added."),oe(!1),i("/recipe/".concat(t),{replace:!0})})).catch((function(t){t.message.includes("401")?(e((0,v.kS)()),R.Am.error("Your session is over. Log In again.")):R.Am.error("Some error happened :("),oe(!1)}))},children:[(0,g.jsxs)("div",{className:u.recipePhoto,children:[ge&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("img",{className:u.recipeImg,src:ge,alt:"Recipe"}),(0,g.jsx)("button",{type:"button",className:u.changePhotoBtnText,onClick:function(){return H("")},children:(0,g.jsx)(h.MSG,{size:24})})]}),!ge&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{type:"button",className:u.addPhotoBtn,onClick:function(){ue.current.click()},children:(0,g.jsx)(h.ueT,{size:28})}),(0,g.jsx)("p",{className:u.addPhotoBtnText,children:"Add image"})]}),(0,g.jsx)("input",{className:u.file,ref:ue,type:"file",name:"photoURL",accept:".jpg, .jpeg, .png",onChange:me,defaultValue:M})]}),(0,g.jsxs)("div",{className:u.inputField,children:[(0,g.jsx)("input",{className:u.inputText,type:"text",name:"drink",placeholder:"Enter item title",value:b,onChange:me}),(0,g.jsx)("input",{className:u.inputText,type:"text",name:"drinkAlternate",placeholder:"Enter about recipe",value:Z,onChange:me}),(0,g.jsx)(W,{title:"Category",item:O,list:f,handleClick:function(e){z(e.target.getAttribute("data-name"))}}),(0,g.jsx)(W,{title:"Glass",item:Q,list:A,handleClick:function(e){K(e.target.getAttribute("data-name"))}})]}),(0,g.jsxs)("div",{className:u.inputIngrField,children:[(0,g.jsxs)("div",{className:u.IngrFieldWrapper,children:[(0,g.jsx)("h2",{className:u.ingredientsTitle,children:"Ingredients"}),(0,g.jsxs)("div",{className:u.ingredientsCountField,children:[(0,g.jsx)("button",{type:"button",className:u.fieldAddDeleteBtn,onClick:function(){if(1!==ce){ae(ce-1);var e=(0,d.Z)(te);e.splice(0,1),ie(e)}else R.Am.error("At least 1 ingredient should be in the recipe")},children:(0,g.jsx)(h.wQF,{size:30})}),(0,g.jsx)("p",{children:ce}),(0,g.jsx)("button",{type:"button",className:u.fieldAddDeleteBtn,onClick:function(){if(10!==ce){ae(ce+1);var e={title:_[0],measure:c[0],id:(0,p.nanoid)()},t=(0,d.Z)(te);t.splice(0,0,e),ie(t)}else R.Am.error("Maximum 10 ingredients can be added to the recipe")},children:(0,g.jsx)(h.ueT,{size:30})})]})]}),te&&0!==te.length?(0,g.jsx)("ul",{className:u.ingredientList,children:te.map((function(e){return(0,g.jsx)(j,{item:e,ingredientsList:_,onChange:he,handleDeleteIngredient:xe},e.id)}))}):(0,g.jsx)("p",{className:u.message,children:"No ingredients"}),(0,g.jsx)("h2",{className:u.ingredientsTitle,children:"Recipe Preparation"}),(0,g.jsx)("textarea",{className:u.instructionsfield,type:"text",name:"instructions",placeholder:"Enter the recipe",value:J,onChange:me}),(0,g.jsx)("button",{type:"submit",className:u.submitBtn,disabled:!b||!Z||!O||!Q||!J||!M||!te,children:"Add"})]})]})})},w=i(8314),E=i(6351),O=i(1087),z={noScroll:"AddRecipePopularContainer_noScroll__1DhqI",conteiner:"AddRecipePopularContainer_conteiner__KPqCW",popular_container:"AddRecipePopularContainer_popular_container__NdmNk",follow_title:"AddRecipePopularContainer_follow_title__oau4n",recipes_title:"AddRecipePopularContainer_recipes_title__FwRwN",card:"AddRecipePopularContainer_card__4YS7u",card_item:"AddRecipePopularContainer_card_item__sWlgD",card_container:"AddRecipePopularContainer_card_container__XL15i",container_img:"AddRecipePopularContainer_container_img__+3XVv",recipe_name:"AddRecipePopularContainer_recipe_name__ILp4+",description:"AddRecipePopularContainer_description__62o+5"},D=i(7896),U=function(){var e=(0,r.I0)(),t=(0,r.v9)(E.AJ);return(0,n.useEffect)((function(){e((0,w.c)())}),[e]),(0,g.jsx)("div",{className:z.popular_container,children:(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:z.follow_title,children:"Follow Us"}),(0,g.jsx)(D.L,{}),(0,g.jsx)("h3",{className:z.recipes_title,children:"Popular recipe"}),(0,g.jsx)("ul",{className:z.card,children:t.map((function(e){var t=e._id,i=e.drink,n=e.drinkAlternate,r=e.drinkThumb;return(0,g.jsx)("li",{className:z.card_item,children:(0,g.jsxs)(O.rU,{to:"/recipe/".concat(t),className:z.card_container,children:[(0,g.jsx)("div",{children:(0,g.jsx)("img",{src:r,alt:i,width:"90",className:z.container_img})}),(0,g.jsxs)("div",{className:z.recipe_name,children:[(0,g.jsx)("p",{className:z.ingridient,children:i}),(0,g.jsx)("p",{className:z.description,children:n})]})]})},t)}))})]})})},Q=function(){var e=(0,r.v9)(E.AJ).isLoading;return(0,g.jsxs)("section",{className:c,children:[e&&(0,g.jsx)(B.Z,{}),(0,g.jsx)(R.x7,{}),(0,g.jsx)("h1",{className:s,children:" Add recipe "}),(0,g.jsxs)("div",{className:a,children:[(0,g.jsx)(y,{}),(0,g.jsx)(U,{})]})]})}}}]);
//# sourceMappingURL=945.a7e8ddd8.chunk.js.map