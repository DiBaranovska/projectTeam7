"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[945],{8028:function(e,t,n){n.d(t,{a5:function(){return l},bS:function(){return d},pX:function(){return o},wR:function(){return s}});var i=n(5861),r=n(4687),c=n.n(r),a=n(1243);a.Z.defaults.baseURL="https://projectteam7-backend.onrender.com";var s=function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get("recipes/glass",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching glasses:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get("recipes/ingredients",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching ingredients:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get("recipes/category",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching categories:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,i.Z)(c().mark((function e(t,n){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get("/search",{params:n,headers:{Authorization:"Bearer ".concat(t)}});case 3:return i=e.sent,e.abrupt("return",i.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},8945:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var i=n(2791),r="AddRecipePage_section__QxQ23",c="AddRecipePage_container__uC-B6",a="AddRecipePage_title__FKZqh",s=n(3433),l=n(9439),d=n(7689),o=n(8813),u={noScroll:"addRecipeForm_noScroll__eO3AL",conteiner:"addRecipeForm_conteiner__6kfsw",addForm:"addRecipeForm_addForm__hxaQ9",recipePhoto:"addRecipeForm_recipePhoto__lRoeB",recipeImg:"addRecipeForm_recipeImg__DHZE4",addPhotoBtn:"addRecipeForm_addPhotoBtn__W6lR4",addPhotoBtnText:"addRecipeForm_addPhotoBtnText__b6wdZ",changePhotoBtnText:"addRecipeForm_changePhotoBtnText__EmrBy",file:"addRecipeForm_file__37GkQ",inputField:"addRecipeForm_inputField__LtXrZ",inputWrapper:"addRecipeForm_inputWrapper__s+lmf",inputText:"addRecipeForm_inputText__NkLkv",inputSelectText:"addRecipeForm_inputSelectText__2IxPO",inputSelect:"addRecipeForm_inputSelect__VXv04",inputIngrField:"addRecipeForm_inputIngrField__t2LF7",ingredientsTitle:"addRecipeForm_ingredientsTitle__kgf9b",ingredientsCountField:"addRecipeForm_ingredientsCountField__UUnIA",IngrFieldWrapper:"addRecipeForm_IngrFieldWrapper__uXIQ9",fieldAddDeleteBtn:"addRecipeForm_fieldAddDeleteBtn__QUBLN",ingredientList:"addRecipeForm_ingredientList__11ZaP",ingredientItem:"addRecipeForm_ingredientItem__h7TuF",selectWrapper:"addRecipeForm_selectWrapper__YJzQ+",instructionsfield:"addRecipeForm_instructionsfield__39boy",submitBtn:"addRecipeForm_submitBtn__w+0Ki"},p=n(9434),m=n(2466),_=n(1413),h=n(5763),f={inputWrapper:"addRecipeSelectIngr_inputWrapper__rEt8K",title:"addRecipeSelectIngr_title__PpdMg addRecipeSelectIngr_inputWrapper__rEt8K",measure:"addRecipeSelectIngr_measure__1epfr addRecipeSelectIngr_inputWrapper__rEt8K",inputSelect:"addRecipeSelectIngr_inputSelect__AUlye",selectedText:"addRecipeSelectIngr_selectedText__a07fc",selectedTextActive:"addRecipeSelectIngr_selectedTextActive__FExY2",selectOptionsListWrapper:"addRecipeSelectIngr_selectOptionsListWrapper__uxIv+",selectOptionsList:"addRecipeSelectIngr_selectOptionsList__YN-Vr",selectOptionsItem:"addRecipeSelectIngr_selectOptionsItem__fDSb6"},g=n(184),x=function(e){var t=e.initValue,n=e.list,r=e.handleClick,c=e.type,a=(0,i.useState)(!1),s=(0,l.Z)(a,2),d=s[0],o=s[1],u=(0,i.useState)(t),p=(0,l.Z)(u,2),m=p[0],_=p[1];(0,i.useEffect)((function(){return document.addEventListener("mousedown",v),function(){document.removeEventListener("mousedown",v)}}),[]);var x=function(e){console.log("e:",e),_(e.target.getAttribute("data-name")),o(!1),r(e.target.getAttribute("data-name"))},v=function(e){"select"!==e.target.getAttribute("name")&&o(!1)};return(0,g.jsx)("div",{className:f[c],children:t&&(0,g.jsxs)("div",{className:f.inputSelect,children:[(0,g.jsxs)("div",{name:"select",className:f.selectedText,onClick:function(){o(!d)},children:[(0,g.jsx)("p",{name:"select",children:m}),(0,g.jsx)("p",{children:(0,g.jsx)(h.RiH,{name:"select",className:d&&f.selectedTextActive})})]}),d&&(0,g.jsx)("div",{className:f.selectOptionsListWrapper,children:(0,g.jsx)("ul",{name:"select",className:f.selectOptionsList,children:n.map((function(e){return(0,g.jsx)("li",{className:f.selectOptionsItem,onClick:x,children:(0,g.jsx)("p",{"data-name":e,name:"select",children:e})},e)}))})})]})})},v=function(e){var t=e.item,n=e.ingredientsList,i=e.onChange,r=e.handleDeleteIngredient;return(0,g.jsxs)("li",{className:u.ingredientItem,children:[(0,g.jsxs)("div",{className:u.selectWrapper,children:[(0,g.jsx)(x,{type:"title",initValue:t.title,list:n,handleClick:function(e){console.log(e),i((0,_.Z)((0,_.Z)({},t),{},{title:e}))}}),(0,g.jsx)(x,{type:"measure",initValue:t.measure,list:["1/2 oz","1/4 oz","3/4 oz","1 oz"],handleClick:function(e){console.log(e),i((0,_.Z)((0,_.Z)({},t),{},{measure:e}))}})]}),(0,g.jsx)("button",{type:"button",className:u.fieldAddDeleteBtn,onClick:function(){r(t.id)},children:(0,g.jsx)(h.Q7B,{size:30})})]})},j=n(3402),R=n(2635),F=n(7320),N=n(8028),S=n(5496),A="addRecipeSelectForm_inputWrapper__CrMfn",k="addRecipeSelectForm_inputText__qJt77",b="addRecipeSelectForm_inputSelectText__jk2WY",C="addRecipeSelectForm_inputSelect__UhlU2",I="addRecipeSelectForm_selectedText__hcog0",w="addRecipeSelectForm_selectedTextActive__s9jOS",L="addRecipeSelectForm_selectOptionsListWrapper__GrQtd",Z="addRecipeSelectForm_selectOptionsList__02m8C",T="addRecipeSelectForm_selectOptionsItem__R4zUN",P=function(e){var t=e.title,n=e.item,r=e.list,c=e.handleClick,a=(0,i.useState)(!1),s=(0,l.Z)(a,2),d=s[0],o=s[1];(0,i.useEffect)((function(){return document.addEventListener("mousedown",p),function(){document.removeEventListener("mousedown",p)}}),[]);var u=function(e){console.log("e:",e),c(e),o(!1)},p=function(e){"select"!==e.target.getAttribute("name")&&(o(!1),console.log("classList:",e.target.getAttribute("name")))};return(0,g.jsxs)("div",{className:A,children:[(0,g.jsx)("div",{className:k,children:(0,g.jsx)("p",{className:b,children:t})}),n&&(0,g.jsxs)("div",{className:C,children:[(0,g.jsxs)("div",{name:"select",className:I,onClick:function(){o(!d)},children:[(0,g.jsx)("p",{name:"select",children:n}),(0,g.jsx)("p",{children:(0,g.jsx)(h.RiH,{name:"select",className:d&&w})})]}),d&&(0,g.jsx)("div",{className:L,children:(0,g.jsx)("ul",{name:"select",className:Z,children:r.map((function(e){return(0,g.jsx)("li",{className:T,onClick:u,children:(0,g.jsx)("p",{"data-name":e,name:"select",children:e})},e)}))})})]})]})},B=function(){var e=(0,p.I0)(),t=(0,p.v9)(F.rK),n=(0,d.s0)(),r=(0,p.v9)((function(e){return e.cocktail.ingredientsList})),c=(0,p.v9)((function(e){return e.cocktail.categoriesList})),a=(0,p.v9)((function(e){return e.cocktail.glassesList})),_=["1/2 oz","1/4 oz","3/4 oz","1 oz"];(0,i.useEffect)((function(){console.log("useEffect"),t&&((0,N.a5)(t).then((function(t){t.sort(),e((0,S.Y1)(t))})).catch((function(e){return console.error("Error fetching ingredients:",e)})),(0,N.bS)(t).then((function(t){t.sort(),e((0,S.Zi)(t)),y(t[0])})).catch((function(e){return console.error("Error fetching categories:",e)})),(0,N.wR)(t).then((function(t){t.sort(),e((0,S.xo)(t)),O(t[0])})).catch((function(e){return console.error("Error fetching glasses:",e)})))}),[e,t]);var f=[{id:1,title:r[0],measure:_[0]},{id:2,title:r[0],measure:_[0]},{id:3,title:r[0],measure:_[0]}],x=(0,i.useState)(""),A=(0,l.Z)(x,2),k=A[0],b=A[1],C=(0,i.useState)(""),I=(0,l.Z)(C,2),w=I[0],L=I[1],Z=(0,i.useState)(""),T=(0,l.Z)(Z,2),B=T[0],y=T[1],E=(0,i.useState)(""),W=(0,l.Z)(E,2),z=W[0],O=W[1],U=(0,i.useState)(""),D=(0,l.Z)(U,2),Q=D[0],K=D[1],V=(0,i.useState)(""),X=(0,l.Z)(V,2),Y=X[0],q=X[1],G=(0,i.useState)([]),J=(0,l.Z)(G,2),M=J[0],H=J[1],$=(0,i.useState)(3),ee=(0,l.Z)($,2),te=ee[0],ne=ee[1],ie=(0,i.useRef)(),re=(0,i.useRef)();!M.length&&f[0].title&&H(f);var ce=function(e){var t=e.currentTarget,n=t.name,i=t.value,r=t.files,c=t.type;if("file"!==c||null!==r&&void 0!==r&&r[0]){if(Boolean(null===r||void 0===r?void 0:r[0]))if(!(r[0].name.endsWith(".jpg")||r[0].name.endsWith(".png")||r[0].name.endsWith(".jpeg")))return alert("Only jpg/jpeg and png files are allowed!");"drink"===n?b(i):"drinkAlternate"===n?L(i):"category"===n?y(i):"glass"===n?O(i):"instructions"===n?K(i):"file"===c?q(null===r||void 0===r?void 0:r[0]):"ingredients"===n&&H(i)}},ae=function(){b(""),L(""),y(c[0]),O(a[0]),K(""),q(""),H(f),ne(3)},se=function(e){var t=(0,s.Z)(M),n=t.findIndex((function(t){return t.id===e.id}));t.splice(n,1,e),H(t)},le=function(e){if(1!==te){var t=(0,s.Z)(M),n=t.findIndex((function(t){return t.id===e}));t.splice(n,1),H(t),console.log("ingredients",M),ne(te-1)}else j.Am.error("At least 1 ingredient should be in the recipe")},de=Y&&URL.createObjectURL(Y);return(0,g.jsxs)("form",{ref:ie,className:u.addForm,onSubmit:function(t){t.preventDefault();var i={drink:k,drinkAlternate:w,category:B||c[0],glass:z||a[0],instructions:Q,ingredients:M.map((function(e){return{title:e.title,measure:e.measure}}))},r=new FormData;r.append("data",JSON.stringify(i)),r.append("drinkThumb",Y),e((0,m.e2)(r)).unwrap().then((function(e){var t=e._id;ae(),j.Am.success("Recipe is added."),n("/recipe/".concat(t),{replace:!0})})).catch((function(t){t.message.includes("401")?(e((0,R.kS)()),j.Am.error("Your session is over. Log In again.")):j.Am.error("Some error happened :(")}))},children:[(0,g.jsxs)("div",{className:u.recipePhoto,children:[de&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("img",{className:u.recipeImg,src:de,alt:"Recipe"}),(0,g.jsx)("button",{className:u.changePhotoBtnText,onClick:function(){return q("")},children:(0,g.jsx)(h.MSG,{size:24})})]}),!de&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{className:u.addPhotoBtn,onClick:function(){re.current.click()},children:(0,g.jsx)(h.ueT,{size:28})}),(0,g.jsx)("p",{className:u.addPhotoBtnText,children:"Add image"})]}),(0,g.jsx)("input",{className:u.file,ref:re,type:"file",name:"photoURL",accept:".jpg, .jpeg, .png",onChange:ce,defaultValue:Y})]}),(0,g.jsxs)("div",{className:u.inputField,children:[(0,g.jsx)("input",{className:u.inputText,type:"text",name:"drink",placeholder:"Enter item title",value:k,onChange:ce}),(0,g.jsx)("input",{className:u.inputText,type:"text",name:"drinkAlternate",placeholder:"Enter about recipe",value:w,onChange:ce}),(0,g.jsx)(P,{title:"Category",item:B,list:c,handleClick:function(e){y(e.target.getAttribute("data-name"))}}),(0,g.jsx)(P,{title:"Glass",item:z,list:a,handleClick:function(e){O(e.target.getAttribute("data-name"))}})]}),(0,g.jsxs)("div",{className:u.inputIngrField,children:[(0,g.jsxs)("div",{className:u.IngrFieldWrapper,children:[(0,g.jsx)("h2",{className:u.ingredientsTitle,children:"Ingredients"}),(0,g.jsxs)("div",{className:u.ingredientsCountField,children:[(0,g.jsx)("button",{type:"button",className:u.fieldAddDeleteBtn,onClick:function(){if(1!==te){ne(te-1);var e=(0,s.Z)(M);e.splice(0,1),H(e)}else j.Am.error("At least 1 ingredient should be in the recipe")},disabled:te<=1,children:(0,g.jsx)(h.wQF,{size:30})}),(0,g.jsx)("p",{children:te}),(0,g.jsx)("button",{type:"button",className:u.fieldAddDeleteBtn,onClick:function(){if(10!==te){ne(te+1);var e={title:r[0],measure:_[0],id:(0,o.nanoid)()},t=(0,s.Z)(M);t.splice(0,0,e),H(t)}else j.Am.error("Maximum 10 ingredients can be added to the recipe")},disabled:te>=5,children:(0,g.jsx)(h.ueT,{size:30})})]})]}),M&&0!==M.length?(0,g.jsx)("ul",{className:u.ingredientList,children:M.map((function(e){return(0,g.jsx)(v,{item:e,ingredientsList:r,onChange:se,handleDeleteIngredient:le},e.id)}))}):(0,g.jsx)("p",{className:u.message,children:"No ingredients"}),(0,g.jsx)("h2",{className:u.ingredientsTitle,children:"Recipe Preparation"}),(0,g.jsx)("textarea",{className:u.instructionsfield,type:"text",name:"instructions",placeholder:"Enter the recipe",value:Q,onChange:ce}),(0,g.jsx)("button",{type:"submit",className:u.submitBtn,children:"Add"})]})]})},y=n(8314),E=n(6351),W=n(1087),z={noScroll:"AddRecipePopularContainer_noScroll__1DhqI",conteiner:"AddRecipePopularContainer_conteiner__KPqCW",follow_title:"AddRecipePopularContainer_follow_title__oau4n",recipes_title:"AddRecipePopularContainer_recipes_title__FwRwN",Card:"AddRecipePopularContainer_Card__T+3Qe",card_container:"AddRecipePopularContainer_card_container__XL15i",container_img:"AddRecipePopularContainer_container_img__+3XVv",recipe_name:"AddRecipePopularContainer_recipe_name__ILp4+",description:"AddRecipePopularContainer_description__62o+5"},O=n(7896),U=function(){var e=(0,p.I0)(),t=(0,p.v9)(E.AJ);return(0,i.useEffect)((function(){e((0,y.c)())}),[e]),(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:z.follow_title,children:"Follow Us"}),(0,g.jsx)(O.L,{}),(0,g.jsx)("h3",{className:z.recipes_title,children:"Popular recipe"}),(0,g.jsx)("ul",{className:z.Card,children:t.map((function(e){var t=e._id,n=e.drink,i=e.drinkAlternate,r=e.drinkThumb;return(0,g.jsxs)("li",{className:z.card_container,children:[(0,g.jsx)("div",{children:(0,g.jsx)("img",{src:r,alt:n,width:"90",className:z.container_img})}),(0,g.jsxs)("div",{className:z.recipe_name,children:[(0,g.jsx)(W.rU,{to:"/recipe/".concat(t),className:z.ingridient,children:n}),(0,g.jsx)("p",{className:z.description,children:i})]})]},t)}))})]})},D=function(){return(0,g.jsxs)("section",{className:r,children:[(0,g.jsx)("h1",{className:a,children:" Add recipe "}),(0,g.jsxs)("div",{className:c,children:[(0,g.jsx)(B,{}),(0,g.jsx)(U,{})]})]})}}}]);
//# sourceMappingURL=945.cda2e95f.chunk.js.map