"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[655],{6788:function(e,r,t){t.d(r,{Z:function(){return i}});var n="mainPageTitle_title__xtPBV",a=t(184),i=function(e){var r=e.title;return(0,a.jsx)("h1",{className:n,children:r})}},3289:function(e,r,t){t.d(r,{Z:function(){return l}});var n=t(6048),a=t.n(n),i="paginator_pagination__CCXNm",c="paginator_link__UrJ9e",s="paginator_link_acive__-31uX",o="paginator_disabled__ux7Ye",u=t(184),l=function(e){var r=e.handlePageClick,t=e.itemsPerPage,n=e.pageCount;return(0,u.jsx)(a(),{breakLabel:"...",nextLabel:">",onPageChange:r,pageRangeDisplayed:t,marginPagesDisplayed:t,pageCount:n,previousLabel:"<",renderOnZeroPageCount:null,containerClassName:i,pageLinkClassName:c,previousLinkClassName:c,nextLinkClassName:c,activeLinkClassName:s,disabledLinkClassName:o})}},655:function(e,r,t){t.r(r),t.d(r,{default:function(){return R}});var n=t(9439),a=t(2791),i=t(9434),c=t(1413),s=t(5861),o=t(4687),u=t.n(o),l=t(4942),h=t(184);function g(e){var r=e.ingredientsList,t=e.categoriesList,i=e.onFilterChange,s=(0,a.useState)({name:"",ingredient:"",category:""}),o=(0,n.Z)(s,2),u=o[0],g=o[1],d=(0,a.useState)(null),p=(0,n.Z)(d,2),f=p[0],m=p[1],v=function(e){var r,t,n=e.target,a=n.name,s=n.value,o=s.trim();if(g((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},a,o))})),"name"===a){f&&clearTimeout(f);var h=(r=function(){i(u)},t=1e3,f&&clearTimeout(f),setTimeout(r,t));m(h)}else i((0,c.Z)((0,c.Z)({},u),{},(0,l.Z)({},a,s)))};return(0,h.jsxs)("form",{className:"searchForm",children:[(0,h.jsx)("input",{className:"searchInput",type:"text",placeholder:"Enter the text",name:"name",value:u.name,onChange:v}),(0,h.jsxs)("select",{className:"searchCategory",name:"category",value:u.category,onChange:v,children:[(0,h.jsx)("option",{value:"",children:"All categories"}),t.map((function(e){return(0,h.jsx)("option",{value:e,children:e},e)}))]}),(0,h.jsxs)("select",{className:"searchIngredient",name:"ingredient",value:u.ingredient,onChange:v,children:[(0,h.jsx)("option",{value:"",children:"Ingredients"}),r.map((function(e){return(0,h.jsx)("option",{value:e,children:e},e)}))]})]})}var d="SearchResults_container__7OvpJ",p="SearchResults_container__item__UauzG",f="SearchResults_cocktail__lW5DH",m="SearchResults_cocktail__image__VSxMG",v="SearchResults_cocktail__title__LZ5XR",_="SearchResults_cocktail__link__z8Ql0";function x(e){var r=e.results.cocktails||[];return(0,h.jsx)("div",{children:(0,h.jsx)("ul",{className:d,children:r.map((function(e){return(0,h.jsx)("li",{className:p,children:(0,h.jsxs)("ul",{className:f,children:[(0,h.jsx)("li",{children:(0,h.jsx)("img",{className:m,src:e.drinkThumb,alt:e._id,width:"400",height:"400"})}),(0,h.jsx)("li",{className:v,children:e.drink}),(0,h.jsx)("li",{className:_,children:(0,h.jsx)("a",{href:"./recipe",children:"Ingredients"})})]})},e._id)}))})})}var k=t(3289),C="drinksSearch_searchResults__FXFYt",Z=t(1243);Z.Z.defaults.baseURL="https://projectteam7-backend.onrender.com";var j=function(){var e=(0,s.Z)(u().mark((function e(r){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.Z.get("recipes/ingredients",{headers:{Authorization:"Bearer ".concat(r)}});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching ingredients:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}(),N=function(){var e=(0,s.Z)(u().mark((function e(r){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.Z.get("recipes/category",{headers:{Authorization:"Bearer ".concat(r)}});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching categories:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}(),b=function(){var e=(0,s.Z)(u().mark((function e(r,t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.Z.get("/search",{params:t,headers:{Authorization:"Bearer ".concat(r)}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t){return e.apply(this,arguments)}}(),w=t(5496);function y(e){var r=e.filterCriteria,t=e.onFilterChange,o=e.formData,l=(0,a.useState)([]),d=(0,n.Z)(l,2),p=d[0],f=d[1],m=(0,i.v9)((function(e){return e.user.token})),v=(0,i.v9)((function(e){return e.cocktail.categoriesList})),_=(0,i.v9)((function(e){return e.cocktail.ingredientsList})),Z=(0,i.I0)(),j=(0,a.useCallback)(function(){var e=(0,s.Z)(u().mark((function e(r){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(m,r);case 3:t=e.sent,f(t),Z((0,w.iM)(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r){return e.apply(this,arguments)}}(),[Z,m]);(0,a.useEffect)((function(){j((0,c.Z)((0,c.Z)((0,c.Z)({},r),o),{},{page:1}))}),[r,j,o]);var N=(0,i.v9)((function(e){return e.cocktail.results.totalCocktails})),y=(0,i.v9)((function(e){return e.cocktail.results.perPage})),L=Math.ceil(N/y);return(0,h.jsxs)("div",{children:[(0,h.jsx)(g,{ingredientsList:_,categoriesList:v,onSearch:j,filterCriteria:r,onFilterChange:t}),(0,h.jsx)(x,{results:p}),L?(0,h.jsx)(k.Z,{handlePageClick:function(e){var t=e.selected+1,n=(0,c.Z)((0,c.Z)({},r),{},{page:t}),a={};n.ingredient&&(a.ingredient=n.ingredient),n.category&&(a.category=n.category),n.page&&(a.page=n.page),n.name&&(a.name=n.name),j(a)},pageCount:L}):(0,h.jsx)("div",{className:C,children:"No search results"})]})}var L=t(6788),S="DrinksPage_container__BObMF",P="DrinksPage_wrap_main__6netV",R=function(){var e=(0,i.v9)((function(e){return e.user.token})),r=(0,i.I0)(),t=(0,a.useState)({}),c=(0,n.Z)(t,1)[0],s=(0,a.useState)({ingredient:"",category:""}),o=(0,n.Z)(s,2),u=o[0],l=o[1],g=(0,a.useCallback)((function(e){l(e)}),[]);return(0,a.useEffect)((function(){e&&(j(e).then((function(e){e.sort(),r((0,w.Y1)(e))})).catch((function(e){return console.error("Error fetching ingredients:",e)})),N(e).then((function(e){e.sort(),r((0,w.Zi)(e))})).catch((function(e){return console.error("Error fetching categories:",e)})))}),[r,e]),(0,h.jsx)("div",{className:S,children:(0,h.jsxs)("main",{className:P,children:[(0,h.jsx)(L.Z,{title:"Drinks"}),(0,h.jsx)(y,{filterCriteria:u,onFilterChange:g,formData:c})]})})}}}]);
//# sourceMappingURL=655.0ce94aeb.chunk.js.map