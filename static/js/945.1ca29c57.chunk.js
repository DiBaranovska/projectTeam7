"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[945],{8945:function(e,t,i){i.r(t),i.d(t,{default:function(){return Q}});var n=i(2791),r=i(9434),c="AddRecipePage_section__QxQ23",a="AddRecipePage_container__uC-B6",s="AddRecipePage_title__FKZqh",d=i(3433),l=i(9439),o=i(7689),p=i(8813),u={noScroll:"addRecipeForm_noScroll__eO3AL",conteiner:"addRecipeForm_conteiner__6kfsw",addForm:"addRecipeForm_addForm__hxaQ9",recipePhoto:"addRecipeForm_recipePhoto__lRoeB",recipeImg:"addRecipeForm_recipeImg__DHZE4",addPhotoBtn:"addRecipeForm_addPhotoBtn__W6lR4",addPhotoBtnText:"addRecipeForm_addPhotoBtnText__b6wdZ",changePhotoBtnText:"addRecipeForm_changePhotoBtnText__EmrBy",file:"addRecipeForm_file__37GkQ",inputField:"addRecipeForm_inputField__LtXrZ",inputWrapper:"addRecipeForm_inputWrapper__s+lmf",inputText:"addRecipeForm_inputText__NkLkv",inputSelectText:"addRecipeForm_inputSelectText__2IxPO",inputSelect:"addRecipeForm_inputSelect__VXv04",inputIngrField:"addRecipeForm_inputIngrField__t2LF7",ingredientsTitle:"addRecipeForm_ingredientsTitle__kgf9b",ingredientsCountField:"addRecipeForm_ingredientsCountField__UUnIA",IngrFieldWrapper:"addRecipeForm_IngrFieldWrapper__uXIQ9",fieldAddDeleteBtn:"addRecipeForm_fieldAddDeleteBtn__QUBLN",ingredientList:"addRecipeForm_ingredientList__11ZaP",ingredientItem:"addRecipeForm_ingredientItem__h7TuF",selectWrapper:"addRecipeForm_selectWrapper__YJzQ+",instructionsfield:"addRecipeForm_instructionsfield__39boy",submitBtn:"addRecipeForm_submitBtn__w+0Ki"},_=i(2466),m=i(1413),h=i(5763),x={inputWrapper:"addRecipeSelectIngr_inputWrapper__rEt8K",title:"addRecipeSelectIngr_title__PpdMg addRecipeSelectIngr_inputWrapper__rEt8K",measure:"addRecipeSelectIngr_measure__1epfr addRecipeSelectIngr_inputWrapper__rEt8K",inputSelect:"addRecipeSelectIngr_inputSelect__AUlye",selectedText:"addRecipeSelectIngr_selectedText__a07fc",selectedTextActive:"addRecipeSelectIngr_selectedTextActive__FExY2",selectOptionsListWrapper:"addRecipeSelectIngr_selectOptionsListWrapper__uxIv+",selectOptionsList:"addRecipeSelectIngr_selectOptionsList__YN-Vr",selectOptionsItem:"addRecipeSelectIngr_selectOptionsItem__fDSb6"},g=i(184),f=function(e){var t=e.initValue,i=e.list,r=e.handleClick,c=e.type,a=(0,n.useState)(!1),s=(0,l.Z)(a,2),d=s[0],o=s[1],p=(0,n.useState)(t),u=(0,l.Z)(p,2),_=u[0],m=u[1];(0,n.useEffect)((function(){return document.addEventListener("mousedown",j),function(){document.removeEventListener("mousedown",j)}}),[]);var f=function(e){m(e.target.getAttribute("data-name")),o(!1),r(e.target.getAttribute("data-name"))},j=function(e){"select"!==e.target.getAttribute("name")&&o(!1)};return(0,g.jsx)("div",{className:x[c],children:t&&(0,g.jsxs)("div",{className:x.inputSelect,children:[(0,g.jsxs)("div",{name:"select",className:x.selectedText,onClick:function(){o(!d)},children:[(0,g.jsx)("p",{name:"select",children:_}),(0,g.jsx)("p",{children:(0,g.jsx)(h.RiH,{name:"select",className:d&&x.selectedTextActive})})]}),d&&(0,g.jsx)("div",{className:x.selectOptionsListWrapper,children:(0,g.jsx)("ul",{name:"select",className:x.selectOptionsList,children:i.map((function(e){return(0,g.jsx)("li",{className:x.selectOptionsItem,onClick:f,children:(0,g.jsx)("p",{"data-name":e,name:"select",children:e})},e)}))})})]})})},j=function(e){var t=e.item,i=e.ingredientsList,n=e.onChange,r=e.handleDeleteIngredient;return(0,g.jsxs)("li",{className:u.ingredientItem,children:[(0,g.jsxs)("div",{className:u.selectWrapper,children:[(0,g.jsx)(f,{type:"title",initValue:t.title,list:i,handleClick:function(e){n((0,m.Z)((0,m.Z)({},t),{},{title:e}))}}),(0,g.jsx)(f,{type:"measure",initValue:t.measure,list:["1/2 oz","1/4 oz","3/4 oz","1 oz"],handleClick:function(e){n((0,m.Z)((0,m.Z)({},t),{},{measure:e}))}})]}),(0,g.jsx)("button",{type:"button",className:u.fieldAddDeleteBtn,onClick:function(){r(t.id)},children:(0,g.jsx)(h.Q7B,{size:30})})]})},R=i(3402),v=i(2635),N=i(7320),F=i(8028),S=i(5496),A="addRecipeSelectForm_inputWrapper__CrMfn",k="addRecipeSelectForm_inputText__qJt77",C="addRecipeSelectForm_inputSelectText__jk2WY",I="addRecipeSelectForm_inputSelect__UhlU2",b="addRecipeSelectForm_selectedText__hcog0",L="addRecipeSelectForm_selectedTextActive__s9jOS",P="addRecipeSelectForm_selectOptionsListWrapper__GrQtd",T="addRecipeSelectForm_selectOptionsList__02m8C",Z="addRecipeSelectForm_selectOptionsItem__R4zUN",W=function(e){var t=e.title,i=e.item,r=e.list,c=e.handleClick,a=(0,n.useState)(!1),s=(0,l.Z)(a,2),d=s[0],o=s[1];(0,n.useEffect)((function(){return document.addEventListener("mousedown",u),function(){document.removeEventListener("mousedown",u)}}),[]);var p=function(e){c(e),o(!1)},u=function(e){"select"!==e.target.getAttribute("name")&&o(!1)};return(0,g.jsxs)("div",{className:A,children:[(0,g.jsx)("div",{className:k,children:(0,g.jsx)("p",{className:C,children:t})}),i&&(0,g.jsxs)("div",{className:I,children:[(0,g.jsxs)("div",{name:"select",className:b,onClick:function(){o(!d)},children:[(0,g.jsx)("p",{name:"select",children:i}),(0,g.jsx)("p",{children:(0,g.jsx)(h.RiH,{name:"select",className:d&&L})})]}),d&&(0,g.jsx)("div",{className:P,children:(0,g.jsx)("ul",{name:"select",className:T,children:r.map((function(e){return(0,g.jsx)("li",{className:Z,onClick:p,children:(0,g.jsx)("p",{"data-name":e,name:"select",children:e})},e)}))})})]})]})},w=i(7173),B=function(){var e=(0,r.I0)(),t=(0,r.v9)(N.rK),i=(0,o.s0)(),c=(0,r.v9)((function(e){return e.cocktail.ingredientsList})),a=(0,r.v9)((function(e){return e.cocktail.categoriesList})),s=(0,r.v9)((function(e){return e.cocktail.glassesList})),m=["1/2 oz","1/4 oz","3/4 oz","1 oz"];(0,n.useEffect)((function(){t&&((0,F.a5)(t).then((function(t){t.sort(),e((0,S.Y1)(t))})).catch((function(e){return console.error("Error fetching ingredients:",e)})),(0,F.bS)(t).then((function(t){t.sort(),e((0,S.Zi)(t)),y(t[0])})).catch((function(e){return console.error("Error fetching categories:",e)})),(0,F.wR)(t).then((function(t){t.sort(),e((0,S.xo)(t)),D(t[0])})).catch((function(e){return console.error("Error fetching glasses:",e)})))}),[e,t]);var x=[{id:1,title:c[0],measure:m[0]},{id:2,title:c[0],measure:m[0]},{id:3,title:c[0],measure:m[0]}],f=(0,n.useState)(""),A=(0,l.Z)(f,2),k=A[0],C=A[1],I=(0,n.useState)(""),b=(0,l.Z)(I,2),L=b[0],P=b[1],T=(0,n.useState)(""),Z=(0,l.Z)(T,2),B=Z[0],y=Z[1],E=(0,n.useState)(""),O=(0,l.Z)(E,2),z=O[0],D=O[1],U=(0,n.useState)(""),Q=(0,l.Z)(U,2),K=Q[0],V=Q[1],Y=(0,n.useState)(""),J=(0,l.Z)(Y,2),X=J[0],q=J[1],G=(0,n.useState)([]),M=(0,l.Z)(G,2),H=M[0],$=M[1],ee=(0,n.useState)(3),te=(0,l.Z)(ee,2),ie=te[0],ne=te[1],re=(0,n.useState)(!1),ce=(0,l.Z)(re,2),ae=ce[0],se=ce[1],de=(0,n.useRef)(),le=(0,n.useRef)();!H.length&&x[0].title&&$(x);var oe=function(e){var t=e.currentTarget,i=t.name,n=t.value,r=t.files,c=t.type;if("file"!==c||null!==r&&void 0!==r&&r[0]){if(Boolean(null===r||void 0===r?void 0:r[0]))if(!(r[0].name.endsWith(".jpg")||r[0].name.endsWith(".png")||r[0].name.endsWith(".jpeg")))return alert("Only jpg/jpeg and png files are allowed!");"drink"===i?C(n):"drinkAlternate"===i?P(n):"category"===i?y(n):"glass"===i?D(n):"instructions"===i?V(n):"file"===c?q(null===r||void 0===r?void 0:r[0]):"ingredients"===i&&$(n)}},pe=function(){C(""),P(""),y(a[0]),D(s[0]),V(""),q(""),$(x),ne(3)},ue=function(e){var t=(0,d.Z)(H),i=t.findIndex((function(t){return t.id===e.id}));t.splice(i,1,e),$(t)},_e=function(e){if(1!==ie){var t=(0,d.Z)(H),i=t.findIndex((function(t){return t.id===e}));t.splice(i,1),$(t),ne(ie-1)}else R.Am.error("At least 1 ingredient should be in the recipe")},me=X&&URL.createObjectURL(X);return(0,g.jsx)(g.Fragment,{children:ae?(0,g.jsx)(w.Z,{}):(0,g.jsxs)("form",{ref:de,className:u.addForm,onSubmit:function(t){t.preventDefault(),se(!0);var n={drink:k,drinkAlternate:L,category:B||a[0],glass:z||s[0],instructions:K,ingredients:H.map((function(e){return{title:e.title,measure:e.measure}}))},r=new FormData;r.append("data",JSON.stringify(n)),r.append("drinkThumb",X),e((0,_.e2)(r)).unwrap().then((function(e){var t=e._id;pe(),R.Am.success("Recipe is added."),se(!1),i("/recipe/".concat(t),{replace:!0})})).catch((function(t){t.message.includes("401")?(e((0,v.kS)()),R.Am.error("Your session is over. Log In again.")):R.Am.error("Some error happened :("),se(!1)}))},children:[(0,g.jsxs)("div",{className:u.recipePhoto,children:[me&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("img",{className:u.recipeImg,src:me,alt:"Recipe"}),(0,g.jsx)("button",{type:"button",className:u.changePhotoBtnText,onClick:function(){return q("")},children:(0,g.jsx)(h.MSG,{size:24})})]}),!me&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{type:"button",className:u.addPhotoBtn,onClick:function(){le.current.click()},children:(0,g.jsx)(h.ueT,{size:28})}),(0,g.jsx)("p",{className:u.addPhotoBtnText,children:"Add image"})]}),(0,g.jsx)("input",{className:u.file,ref:le,type:"file",name:"photoURL",accept:".jpg, .jpeg, .png",onChange:oe,defaultValue:X})]}),(0,g.jsxs)("div",{className:u.inputField,children:[(0,g.jsx)("input",{className:u.inputText,type:"text",name:"drink",placeholder:"Enter item title",value:k,onChange:oe}),(0,g.jsx)("input",{className:u.inputText,type:"text",name:"drinkAlternate",placeholder:"Enter about recipe",value:L,onChange:oe}),(0,g.jsx)(W,{title:"Category",item:B,list:a,handleClick:function(e){y(e.target.getAttribute("data-name"))}}),(0,g.jsx)(W,{title:"Glass",item:z,list:s,handleClick:function(e){D(e.target.getAttribute("data-name"))}})]}),(0,g.jsxs)("div",{className:u.inputIngrField,children:[(0,g.jsxs)("div",{className:u.IngrFieldWrapper,children:[(0,g.jsx)("h2",{className:u.ingredientsTitle,children:"Ingredients"}),(0,g.jsxs)("div",{className:u.ingredientsCountField,children:[(0,g.jsx)("button",{type:"button",className:u.fieldAddDeleteBtn,onClick:function(){if(1!==ie){ne(ie-1);var e=(0,d.Z)(H);e.splice(0,1),$(e)}else R.Am.error("At least 1 ingredient should be in the recipe")},children:(0,g.jsx)(h.wQF,{size:30})}),(0,g.jsx)("p",{children:ie}),(0,g.jsx)("button",{type:"button",className:u.fieldAddDeleteBtn,onClick:function(){if(10!==ie){ne(ie+1);var e={title:c[0],measure:m[0],id:(0,p.nanoid)()},t=(0,d.Z)(H);t.splice(0,0,e),$(t)}else R.Am.error("Maximum 10 ingredients can be added to the recipe")},children:(0,g.jsx)(h.ueT,{size:30})})]})]}),H&&0!==H.length?(0,g.jsx)("ul",{className:u.ingredientList,children:H.map((function(e){return(0,g.jsx)(j,{item:e,ingredientsList:c,onChange:ue,handleDeleteIngredient:_e},e.id)}))}):(0,g.jsx)("p",{className:u.message,children:"No ingredients"}),(0,g.jsx)("h2",{className:u.ingredientsTitle,children:"Recipe Preparation"}),(0,g.jsx)("textarea",{className:u.instructionsfield,type:"text",name:"instructions",placeholder:"Enter the recipe",value:K,onChange:oe}),(0,g.jsx)("button",{type:"submit",className:u.submitBtn,disabled:!k||!L||!B||!z||!K||!X||!H,children:"Add"})]})]})})},y=i(8314),E=i(6351),O=i(1087),z={noScroll:"AddRecipePopularContainer_noScroll__1DhqI",conteiner:"AddRecipePopularContainer_conteiner__KPqCW",popular_container:"AddRecipePopularContainer_popular_container__NdmNk",follow_title:"AddRecipePopularContainer_follow_title__oau4n",recipes_title:"AddRecipePopularContainer_recipes_title__FwRwN",card:"AddRecipePopularContainer_card__4YS7u",card_item:"AddRecipePopularContainer_card_item__sWlgD",card_container:"AddRecipePopularContainer_card_container__XL15i",container_img:"AddRecipePopularContainer_container_img__+3XVv",recipe_name:"AddRecipePopularContainer_recipe_name__ILp4+",description:"AddRecipePopularContainer_description__62o+5"},D=i(7896),U=function(){var e=(0,r.I0)(),t=(0,r.v9)(E.AJ);return(0,n.useEffect)((function(){e((0,y.c)())}),[e]),(0,g.jsx)("div",{className:z.popular_container,children:(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:z.follow_title,children:"Follow Us"}),(0,g.jsx)(D.L,{}),(0,g.jsx)("h3",{className:z.recipes_title,children:"Popular recipe"}),(0,g.jsx)("ul",{className:z.card,children:t.map((function(e){var t=e._id,i=e.drink,n=e.drinkAlternate,r=e.drinkThumb;return(0,g.jsx)("li",{className:z.card_item,children:(0,g.jsxs)(O.rU,{to:"/recipe/".concat(t),className:z.card_container,children:[(0,g.jsx)("div",{children:(0,g.jsx)("img",{src:r,alt:i,width:"90",className:z.container_img})}),(0,g.jsxs)("div",{className:z.recipe_name,children:[(0,g.jsx)("p",{className:z.ingridient,children:i}),(0,g.jsx)("p",{className:z.description,children:n})]})]})},t)}))})]})})},Q=function(){var e=(0,r.v9)(E.AJ).isLoading;return(0,g.jsxs)("section",{className:c,children:[e&&(0,g.jsx)(w.Z,{}),(0,g.jsx)(R.x7,{}),(0,g.jsx)("h1",{className:s,children:" Add recipe "}),(0,g.jsxs)("div",{className:a,children:[(0,g.jsx)(B,{}),(0,g.jsx)(U,{})]})]})}}}]);
//# sourceMappingURL=945.1ca29c57.chunk.js.map