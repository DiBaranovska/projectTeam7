"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[945],{8945:function(e,t,i){i.r(t),i.d(t,{default:function(){return U}});var n=i(2791),r="AddRecipePage_section__QxQ23",c="AddRecipePage_container__uC-B6",s="AddRecipePage_title__FKZqh",a=i(3433),d=i(9439),l=i(7689),o=i(8813),p={noScroll:"addRecipeForm_noScroll__eO3AL",conteiner:"addRecipeForm_conteiner__6kfsw",addForm:"addRecipeForm_addForm__hxaQ9",recipePhoto:"addRecipeForm_recipePhoto__lRoeB",recipeImg:"addRecipeForm_recipeImg__DHZE4",addPhotoBtn:"addRecipeForm_addPhotoBtn__W6lR4",addPhotoBtnText:"addRecipeForm_addPhotoBtnText__b6wdZ",changePhotoBtnText:"addRecipeForm_changePhotoBtnText__EmrBy",file:"addRecipeForm_file__37GkQ",inputField:"addRecipeForm_inputField__LtXrZ",inputWrapper:"addRecipeForm_inputWrapper__s+lmf",inputText:"addRecipeForm_inputText__NkLkv",inputSelectText:"addRecipeForm_inputSelectText__2IxPO",inputSelect:"addRecipeForm_inputSelect__VXv04",inputIngrField:"addRecipeForm_inputIngrField__t2LF7",ingredientsTitle:"addRecipeForm_ingredientsTitle__kgf9b",ingredientsCountField:"addRecipeForm_ingredientsCountField__UUnIA",IngrFieldWrapper:"addRecipeForm_IngrFieldWrapper__uXIQ9",fieldAddDeleteBtn:"addRecipeForm_fieldAddDeleteBtn__QUBLN",ingredientList:"addRecipeForm_ingredientList__11ZaP",ingredientItem:"addRecipeForm_ingredientItem__h7TuF",selectWrapper:"addRecipeForm_selectWrapper__YJzQ+",instructionsfield:"addRecipeForm_instructionsfield__39boy",submitBtn:"addRecipeForm_submitBtn__w+0Ki"},u=i(9434),m=i(2466),_=i(1413),h=i(5763),g={inputWrapper:"addRecipeSelectIngr_inputWrapper__rEt8K",title:"addRecipeSelectIngr_title__PpdMg addRecipeSelectIngr_inputWrapper__rEt8K",measure:"addRecipeSelectIngr_measure__1epfr addRecipeSelectIngr_inputWrapper__rEt8K",inputSelect:"addRecipeSelectIngr_inputSelect__AUlye",selectedText:"addRecipeSelectIngr_selectedText__a07fc",selectedTextActive:"addRecipeSelectIngr_selectedTextActive__FExY2",selectOptionsListWrapper:"addRecipeSelectIngr_selectOptionsListWrapper__uxIv+",selectOptionsList:"addRecipeSelectIngr_selectOptionsList__YN-Vr",selectOptionsItem:"addRecipeSelectIngr_selectOptionsItem__fDSb6"},x=i(184),f=function(e){var t=e.initValue,i=e.list,r=e.handleClick,c=e.type,s=(0,n.useState)(!1),a=(0,d.Z)(s,2),l=a[0],o=a[1],p=(0,n.useState)(t),u=(0,d.Z)(p,2),m=u[0],_=u[1];(0,n.useEffect)((function(){return document.addEventListener("mousedown",j),function(){document.removeEventListener("mousedown",j)}}),[]);var f=function(e){console.log("e:",e),_(e.target.getAttribute("data-name")),o(!1),r(e.target.getAttribute("data-name"))},j=function(e){"select"!==e.target.getAttribute("name")&&o(!1)};return(0,x.jsx)("div",{className:g[c],children:t&&(0,x.jsxs)("div",{className:g.inputSelect,children:[(0,x.jsxs)("div",{name:"select",className:g.selectedText,onClick:function(){o(!l)},children:[(0,x.jsx)("p",{name:"select",children:m}),(0,x.jsx)("p",{children:(0,x.jsx)(h.RiH,{name:"select",className:l&&g.selectedTextActive})})]}),l&&(0,x.jsx)("div",{className:g.selectOptionsListWrapper,children:(0,x.jsx)("ul",{name:"select",className:g.selectOptionsList,children:i.map((function(e){return(0,x.jsx)("li",{className:g.selectOptionsItem,onClick:f,children:(0,x.jsx)("p",{"data-name":e,name:"select",children:e})},e)}))})})]})})},j=function(e){var t=e.item,i=e.ingredientsList,n=e.onChange,r=e.handleDeleteIngredient;return(0,x.jsxs)("li",{className:p.ingredientItem,children:[(0,x.jsxs)("div",{className:p.selectWrapper,children:[(0,x.jsx)(f,{type:"title",initValue:t.title,list:i,handleClick:function(e){console.log(e),n((0,_.Z)((0,_.Z)({},t),{},{title:e}))}}),(0,x.jsx)(f,{type:"measure",initValue:t.measure,list:["1/2 oz","1/4 oz","3/4 oz","1 oz"],handleClick:function(e){console.log(e),n((0,_.Z)((0,_.Z)({},t),{},{measure:e}))}})]}),(0,x.jsx)("button",{type:"button",className:p.fieldAddDeleteBtn,onClick:function(){r(t.id)},children:(0,x.jsx)(h.Q7B,{size:30})})]})},R=i(3402),v=i(2635),F=i(7320),N=i(8028),S=i(5496),A="addRecipeSelectForm_inputWrapper__CrMfn",C="addRecipeSelectForm_inputText__qJt77",k="addRecipeSelectForm_inputSelectText__jk2WY",I="addRecipeSelectForm_inputSelect__UhlU2",b="addRecipeSelectForm_selectedText__hcog0",T="addRecipeSelectForm_selectedTextActive__s9jOS",L="addRecipeSelectForm_selectOptionsListWrapper__GrQtd",P="addRecipeSelectForm_selectOptionsList__02m8C",Z="addRecipeSelectForm_selectOptionsItem__R4zUN",w=function(e){var t=e.title,i=e.item,r=e.list,c=e.handleClick,s=(0,n.useState)(!1),a=(0,d.Z)(s,2),l=a[0],o=a[1];(0,n.useEffect)((function(){return document.addEventListener("mousedown",u),function(){document.removeEventListener("mousedown",u)}}),[]);var p=function(e){c(e),o(!1)},u=function(e){"select"!==e.target.getAttribute("name")&&o(!1)};return(0,x.jsxs)("div",{className:A,children:[(0,x.jsx)("div",{className:C,children:(0,x.jsx)("p",{className:k,children:t})}),i&&(0,x.jsxs)("div",{className:I,children:[(0,x.jsxs)("div",{name:"select",className:b,onClick:function(){o(!l)},children:[(0,x.jsx)("p",{name:"select",children:i}),(0,x.jsx)("p",{children:(0,x.jsx)(h.RiH,{name:"select",className:l&&T})})]}),l&&(0,x.jsx)("div",{className:L,children:(0,x.jsx)("ul",{name:"select",className:P,children:r.map((function(e){return(0,x.jsx)("li",{className:Z,onClick:p,children:(0,x.jsx)("p",{"data-name":e,name:"select",children:e})},e)}))})})]})]})},B=function(){var e=(0,u.I0)(),t=(0,u.v9)(F.rK),i=(0,l.s0)(),r=(0,u.v9)((function(e){return e.cocktail.ingredientsList})),c=(0,u.v9)((function(e){return e.cocktail.categoriesList})),s=(0,u.v9)((function(e){return e.cocktail.glassesList})),_=["1/2 oz","1/4 oz","3/4 oz","1 oz"];(0,n.useEffect)((function(){t&&((0,N.a5)(t).then((function(t){t.sort(),e((0,S.Y1)(t))})).catch((function(e){return console.error("Error fetching ingredients:",e)})),(0,N.bS)(t).then((function(t){t.sort(),e((0,S.Zi)(t)),W(t[0])})).catch((function(e){return console.error("Error fetching categories:",e)})),(0,N.wR)(t).then((function(t){t.sort(),e((0,S.xo)(t)),z(t[0])})).catch((function(e){return console.error("Error fetching glasses:",e)})))}),[e,t]);var g=[{id:1,title:r[0],measure:_[0]},{id:2,title:r[0],measure:_[0]},{id:3,title:r[0],measure:_[0]}],f=(0,n.useState)(""),A=(0,d.Z)(f,2),C=A[0],k=A[1],I=(0,n.useState)(""),b=(0,d.Z)(I,2),T=b[0],L=b[1],P=(0,n.useState)(""),Z=(0,d.Z)(P,2),B=Z[0],W=Z[1],y=(0,n.useState)(""),E=(0,d.Z)(y,2),O=E[0],z=E[1],D=(0,n.useState)(""),U=(0,d.Z)(D,2),Q=U[0],K=U[1],V=(0,n.useState)(""),Y=(0,d.Z)(V,2),X=Y[0],q=Y[1],G=(0,n.useState)([]),J=(0,d.Z)(G,2),M=J[0],H=J[1],$=(0,n.useState)(3),ee=(0,d.Z)($,2),te=ee[0],ie=ee[1],ne=(0,n.useRef)(),re=(0,n.useRef)();!M.length&&g[0].title&&H(g);var ce=function(e){var t=e.currentTarget,i=t.name,n=t.value,r=t.files,c=t.type;if("file"!==c||null!==r&&void 0!==r&&r[0]){if(Boolean(null===r||void 0===r?void 0:r[0]))if(!(r[0].name.endsWith(".jpg")||r[0].name.endsWith(".png")||r[0].name.endsWith(".jpeg")))return alert("Only jpg/jpeg and png files are allowed!");"drink"===i?k(n):"drinkAlternate"===i?L(n):"category"===i?W(n):"glass"===i?z(n):"instructions"===i?K(n):"file"===c?q(null===r||void 0===r?void 0:r[0]):"ingredients"===i&&H(n)}},se=function(){k(""),L(""),W(c[0]),z(s[0]),K(""),q(""),H(g),ie(3)},ae=function(e){var t=(0,a.Z)(M),i=t.findIndex((function(t){return t.id===e.id}));t.splice(i,1,e),H(t)},de=function(e){if(1!==te){var t=(0,a.Z)(M),i=t.findIndex((function(t){return t.id===e}));t.splice(i,1),H(t),ie(te-1)}else R.Am.error("At least 1 ingredient should be in the recipe")},le=X&&URL.createObjectURL(X);return(0,x.jsxs)("form",{ref:ne,className:p.addForm,onSubmit:function(t){t.preventDefault();var n={drink:C,drinkAlternate:T,category:B||c[0],glass:O||s[0],instructions:Q,ingredients:M.map((function(e){return{title:e.title,measure:e.measure}}))},r=new FormData;r.append("data",JSON.stringify(n)),r.append("drinkThumb",X),e((0,m.e2)(r)).unwrap().then((function(e){var t=e._id;se(),R.Am.success("Recipe is added."),i("/recipe/".concat(t),{replace:!0})})).catch((function(t){t.message.includes("401")?(e((0,v.kS)()),R.Am.error("Your session is over. Log In again.")):R.Am.error("Some error happened :(")}))},children:[(0,x.jsxs)("div",{className:p.recipePhoto,children:[le&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("img",{className:p.recipeImg,src:le,alt:"Recipe"}),(0,x.jsx)("button",{type:"button",className:p.changePhotoBtnText,onClick:function(){return q("")},children:(0,x.jsx)(h.MSG,{size:24})})]}),!le&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{type:"button",className:p.addPhotoBtn,onClick:function(){re.current.click()},children:(0,x.jsx)(h.ueT,{size:28})}),(0,x.jsx)("p",{className:p.addPhotoBtnText,children:"Add image"})]}),(0,x.jsx)("input",{className:p.file,ref:re,type:"file",name:"photoURL",accept:".jpg, .jpeg, .png",onChange:ce,defaultValue:X})]}),(0,x.jsxs)("div",{className:p.inputField,children:[(0,x.jsx)("input",{className:p.inputText,type:"text",name:"drink",placeholder:"Enter item title",value:C,onChange:ce}),(0,x.jsx)("input",{className:p.inputText,type:"text",name:"drinkAlternate",placeholder:"Enter about recipe",value:T,onChange:ce}),(0,x.jsx)(w,{title:"Category",item:B,list:c,handleClick:function(e){W(e.target.getAttribute("data-name"))}}),(0,x.jsx)(w,{title:"Glass",item:O,list:s,handleClick:function(e){z(e.target.getAttribute("data-name"))}})]}),(0,x.jsxs)("div",{className:p.inputIngrField,children:[(0,x.jsxs)("div",{className:p.IngrFieldWrapper,children:[(0,x.jsx)("h2",{className:p.ingredientsTitle,children:"Ingredients"}),(0,x.jsxs)("div",{className:p.ingredientsCountField,children:[(0,x.jsx)("button",{type:"button",className:p.fieldAddDeleteBtn,onClick:function(){if(1!==te){ie(te-1);var e=(0,a.Z)(M);e.splice(0,1),H(e)}else R.Am.error("At least 1 ingredient should be in the recipe")},disabled:te<=1,children:(0,x.jsx)(h.wQF,{size:30})}),(0,x.jsx)("p",{children:te}),(0,x.jsx)("button",{type:"button",className:p.fieldAddDeleteBtn,onClick:function(){if(10!==te){ie(te+1);var e={title:r[0],measure:_[0],id:(0,o.nanoid)()},t=(0,a.Z)(M);t.splice(0,0,e),H(t)}else R.Am.error("Maximum 10 ingredients can be added to the recipe")},disabled:te>=5,children:(0,x.jsx)(h.ueT,{size:30})})]})]}),M&&0!==M.length?(0,x.jsx)("ul",{className:p.ingredientList,children:M.map((function(e){return(0,x.jsx)(j,{item:e,ingredientsList:r,onChange:ae,handleDeleteIngredient:de},e.id)}))}):(0,x.jsx)("p",{className:p.message,children:"No ingredients"}),(0,x.jsx)("h2",{className:p.ingredientsTitle,children:"Recipe Preparation"}),(0,x.jsx)("textarea",{className:p.instructionsfield,type:"text",name:"instructions",placeholder:"Enter the recipe",value:Q,onChange:ce}),(0,x.jsx)("button",{type:"submit",className:p.submitBtn,disabled:!C||!T||!B||!O||!Q||!X||!M,children:"Add"})]})]})},W=i(8314),y=i(6351),E=i(1087),O={noScroll:"AddRecipePopularContainer_noScroll__1DhqI",conteiner:"AddRecipePopularContainer_conteiner__KPqCW",follow_title:"AddRecipePopularContainer_follow_title__oau4n",recipes_title:"AddRecipePopularContainer_recipes_title__FwRwN",Card:"AddRecipePopularContainer_Card__T+3Qe",card_container:"AddRecipePopularContainer_card_container__XL15i",container_img:"AddRecipePopularContainer_container_img__+3XVv",recipe_name:"AddRecipePopularContainer_recipe_name__ILp4+",description:"AddRecipePopularContainer_description__62o+5"},z=i(7896),D=function(){var e=(0,u.I0)(),t=(0,u.v9)(y.AJ);return(0,n.useEffect)((function(){e((0,W.c)())}),[e]),(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:O.follow_title,children:"Follow Us"}),(0,x.jsx)(z.L,{}),(0,x.jsx)("h3",{className:O.recipes_title,children:"Popular recipe"}),(0,x.jsx)("ul",{className:O.Card,children:t.map((function(e){var t=e._id,i=e.drink,n=e.drinkAlternate,r=e.drinkThumb;return(0,x.jsxs)("li",{className:O.card_container,children:[(0,x.jsx)("div",{children:(0,x.jsx)("img",{src:r,alt:i,width:"90",className:O.container_img})}),(0,x.jsxs)("div",{className:O.recipe_name,children:[(0,x.jsx)(E.rU,{to:"/recipe/".concat(t),className:O.ingridient,children:i}),(0,x.jsx)("p",{className:O.description,children:n})]})]},t)}))})]})},U=function(){return(0,x.jsxs)("section",{className:r,children:[(0,x.jsx)("h1",{className:s,children:" Add recipe "}),(0,x.jsxs)("div",{className:c,children:[(0,x.jsx)(B,{}),(0,x.jsx)(D,{})]})]})}}}]);
//# sourceMappingURL=945.f9d26b6a.chunk.js.map