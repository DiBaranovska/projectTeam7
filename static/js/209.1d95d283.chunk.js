"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[209],{8028:function(e,t,n){n.d(t,{a5:function(){return o},bS:function(){return d},pX:function(){return l},wR:function(){return s}});var r=n(5861),i=n(4687),a=n.n(i),c=n(1243);c.Z.defaults.baseURL="https://projectteam7-backend.onrender.com";var s=function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("recipes/glass",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching glasses:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("recipes/ingredients",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching ingredients:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("recipes/category",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching categories:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/search",{params:n,headers:{Authorization:"Bearer ".concat(t)}});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},1209:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=n(2791),i="AddRecipePage_section__QxQ23",a="AddRecipePage_container__uC-B6",c="AddRecipePage_title__FKZqh",s=n(3433),o=n(9439),d=n(7689),l=n(8813),u={noScroll:"addRecipeForm_noScroll__eO3AL",conteiner:"addRecipeForm_conteiner__6kfsw",addForm:"addRecipeForm_addForm__hxaQ9",recipePhoto:"addRecipeForm_recipePhoto__lRoeB",recipeImg:"addRecipeForm_recipeImg__DHZE4",addPhotoBtn:"addRecipeForm_addPhotoBtn__W6lR4",addPhotoBtnText:"addRecipeForm_addPhotoBtnText__b6wdZ",changePhotoBtnText:"addRecipeForm_changePhotoBtnText__EmrBy",file:"addRecipeForm_file__37GkQ",inputField:"addRecipeForm_inputField__LtXrZ",inputWrapper:"addRecipeForm_inputWrapper__s+lmf",inputText:"addRecipeForm_inputText__NkLkv",inputSelectText:"addRecipeForm_inputSelectText__2IxPO",inputSelect:"addRecipeForm_inputSelect__VXv04",inputIngrField:"addRecipeForm_inputIngrField__t2LF7",ingredientsTitle:"addRecipeForm_ingredientsTitle__kgf9b",ingredientsCountField:"addRecipeForm_ingredientsCountField__UUnIA",IngrFieldWrapper:"addRecipeForm_IngrFieldWrapper__uXIQ9",fieldAddDeleteBtn:"addRecipeForm_fieldAddDeleteBtn__QUBLN",ingredientList:"addRecipeForm_ingredientList__11ZaP",ingredientItem:"addRecipeForm_ingredientItem__h7TuF",instructionsfield:"addRecipeForm_instructionsfield__39boy",submitBtn:"addRecipeForm_submitBtn__w+0Ki"},p=n(9434),m=n(2466),_=n(1413),h=n(5763),f=n(184),g=function(e){var t=e.item,n=e.ingredientsList,r=e.onChange,i=e.handleDeleteIngredient,a=function(e){var n=e.currentTarget,i=n.name,a=n.value;"title"===i?r((0,_.Z)((0,_.Z)({},t),{},{title:a})):"measure"===i&&r((0,_.Z)((0,_.Z)({},t),{},{measure:a}))};return(0,f.jsxs)("li",{className:u.ingredientItem,children:[(0,f.jsx)("select",{className:"title",name:"title",onChange:a,children:n.map((function(e){return(0,f.jsx)("option",{value:e,children:e},e)}))}),(0,f.jsx)("select",{className:"measureField",name:"measure",onChange:a,children:["1/2 oz","1/4 oz","3/4 oz","1 oz"].map((function(e){return(0,f.jsx)("option",{value:e,children:e},e)}))}),(0,f.jsx)("button",{type:"button",className:u.contact__deleteBtn,onClick:function(){i(t.id)},children:(0,f.jsx)(h.ueT,{size:30})})]})},x=n(3402),v=n(2635),j=n(7320),R=n(8028),F=n(5496),N="addRecipeSelectForm_inputWrapper__CrMfn",A="addRecipeSelectForm_inputText__qJt77",k="addRecipeSelectForm_inputSelectText__jk2WY",b="addRecipeSelectForm_inputSelect__UhlU2",C="addRecipeSelectForm_selectedText__hcog0",S="addRecipeSelectForm_selectedTextActive__s9jOS",w="addRecipeSelectForm_selectOptionsListWrapper__GrQtd",Z="addRecipeSelectForm_selectOptionsList__02m8C",P="addRecipeSelectForm_selectOptionsItem__R4zUN",T=function(e){var t=e.title,n=e.item,i=e.list,a=e.handleClick,c=(0,r.useState)(!1),s=(0,o.Z)(c,2),d=s[0],l=s[1];(0,r.useEffect)((function(){return document.addEventListener("mousedown",p),function(){document.removeEventListener("mousedown",p)}}),[]);var u=function(e){console.log("e:",e),a(e),l(!1)},p=function(e){"select"!==e.target.getAttribute("name")&&(l(!1),console.log("classList:",e.target.getAttribute("name")))};return(0,f.jsxs)("div",{className:N,children:[(0,f.jsx)("div",{className:A,children:(0,f.jsx)("p",{className:k,children:t})}),n&&(0,f.jsxs)("div",{className:b,children:[(0,f.jsxs)("div",{name:"select",className:C,onClick:function(){l(!d)},children:[(0,f.jsx)("p",{name:"select",children:n}),(0,f.jsx)("p",{children:(0,f.jsx)(h.RiH,{name:"select",className:d&&S})})]}),d&&(0,f.jsx)("div",{className:w,children:(0,f.jsx)("ul",{name:"select",className:Z,children:i.map((function(e){return(0,f.jsx)("li",{className:P,onClick:u,children:(0,f.jsx)("p",{"data-name":e,name:"select",children:e})},e)}))})})]})]})},B=function(){var e=(0,p.I0)(),t=(0,p.v9)(j.rK),n=(0,d.s0)(),i=(0,p.v9)((function(e){return e.cocktail.ingredientsList})),a=(0,p.v9)((function(e){return e.cocktail.categoriesList})),c=(0,p.v9)((function(e){return e.cocktail.glassesList})),_=["1/2 oz","1/4 oz","3/4 oz","1 oz"];(0,r.useEffect)((function(){console.log("useEffect"),t&&((0,R.a5)(t).then((function(t){t.sort(),e((0,F.Y1)(t))})).catch((function(e){return console.error("Error fetching ingredients:",e)})),(0,R.bS)(t).then((function(t){t.sort(),e((0,F.Zi)(t)),y(t[0])})).catch((function(e){return console.error("Error fetching categories:",e)})),(0,R.wR)(t).then((function(t){t.sort(),e((0,F.xo)(t)),U(t[0])})).catch((function(e){return console.error("Error fetching glasses:",e)})))}),[e,t]);var N=[{id:1,title:i[0],measure:_[0]},{id:2,title:i[0],measure:_[0]},{id:3,title:i[0],measure:_[0]}],A=(0,r.useState)(""),k=(0,o.Z)(A,2),b=k[0],C=k[1],S=(0,r.useState)(""),w=(0,o.Z)(S,2),Z=w[0],P=w[1],B=(0,r.useState)(""),I=(0,o.Z)(B,2),L=I[0],y=I[1],z=(0,r.useState)(""),E=(0,o.Z)(z,2),W=E[0],U=E[1],D=(0,r.useState)(""),O=(0,o.Z)(D,2),Q=O[0],X=O[1],q=(0,r.useState)(""),G=(0,o.Z)(q,2),K=G[0],J=G[1],M=(0,r.useState)([]),V=(0,o.Z)(M,2),Y=V[0],H=V[1],$=(0,r.useState)(3),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],re=(0,r.useRef)(),ie=(0,r.useRef)();!Y.length&&N[0].title&&H(N);var ae=function(e){var t=e.currentTarget,n=t.name,r=t.value,i=t.files,a=t.type;if("file"!==a||null!==i&&void 0!==i&&i[0]){if(Boolean(null===i||void 0===i?void 0:i[0]))if(!(i[0].name.endsWith(".jpg")||i[0].name.endsWith(".png")||i[0].name.endsWith(".jpeg")))return alert("Only jpg/jpeg and png files are allowed!");"drink"===n?C(r):"drinkAlternate"===n?P(r):"category"===n?y(r):"glass"===n?U(r):"instructions"===n?X(r):"file"===a?J(null===i||void 0===i?void 0:i[0]):"ingredients"===n&&H(r)}},ce=function(){C(""),P(""),y(a[0]),U(c[0]),X(""),J(""),H(N),ne(3)},se=function(e){var t=(0,s.Z)(Y),n=t.findIndex((function(t){return t.id===e.id}));t.splice(n,1,e),H(t)},oe=function(e){if(1!==te){var t=(0,s.Z)(Y),n=t.findIndex((function(t){return t.id===e}));t.splice(n,1),H(t),console.log("ingredients",Y),ne(te-1)}else x.Am.error("At least 1 ingredient should be in the recipe")},de=K&&URL.createObjectURL(K);return(0,f.jsxs)("form",{ref:re,className:u.addForm,onSubmit:function(t){t.preventDefault();var r={drink:b,drinkAlternate:Z,category:L||a[0],glass:W||c[0],instructions:Q,ingredients:Y.map((function(e){return{title:e.title,measure:e.measure}}))},i=new FormData;i.append("data",JSON.stringify(r)),i.append("drinkThumb",K),e((0,m.e2)(i)).unwrap().then((function(e){var t=e._id;ce(),x.Am.success("Recipe is added."),n("/recipe/".concat(t),{replace:!0})})).catch((function(t){t.message.includes("401")?(e((0,v.kS)()),x.Am.error("Your session is over. Log In again.")):x.Am.error("Some error happened :(")}))},children:[(0,f.jsxs)("div",{className:u.recipePhoto,children:[de&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("img",{className:u.recipeImg,src:de,alt:"Recipe"}),(0,f.jsx)("button",{className:u.changePhotoBtnText,onClick:function(){return J("")},children:(0,f.jsx)(h.MSG,{size:24})})]}),!de&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("button",{className:u.addPhotoBtn,onClick:function(){ie.current.click()},children:(0,f.jsx)(h.ueT,{size:28})}),(0,f.jsx)("p",{className:u.addPhotoBtnText,children:"Add image"})]}),(0,f.jsx)("input",{className:u.file,ref:ie,type:"file",name:"photoURL",accept:".jpg, .jpeg, .png",onChange:ae,defaultValue:K})]}),(0,f.jsxs)("div",{className:u.inputField,children:[(0,f.jsx)("input",{className:u.inputText,type:"text",name:"drink",placeholder:"Enter item title",value:b,onChange:ae}),(0,f.jsx)("input",{className:u.inputText,type:"text",name:"drinkAlternate",placeholder:"Enter about recipe",value:Z,onChange:ae}),(0,f.jsx)(T,{title:"Category",item:L,list:a,handleClick:function(e){y(e.target.getAttribute("data-name"))}}),(0,f.jsx)(T,{title:"Glass",item:W,list:c,handleClick:function(e){U(e.target.getAttribute("data-name"))}})]}),(0,f.jsxs)("div",{className:u.inputIngrField,children:[(0,f.jsxs)("div",{className:u.IngrFieldWrapper,children:[(0,f.jsx)("h2",{className:u.ingredientsTitle,children:"Ingredients"}),(0,f.jsxs)("div",{className:u.ingredientsCountField,children:[(0,f.jsx)("button",{type:"button",className:u.fieldAddDeleteBtn,onClick:function(){if(1!==te){ne(te-1);var e=(0,s.Z)(Y);e.splice(0,1),H(e)}else x.Am.error("At least 1 ingredient should be in the recipe")},disabled:te<=1,children:(0,f.jsx)(h.wQF,{size:30})}),(0,f.jsx)("p",{children:te}),(0,f.jsx)("button",{type:"button",className:u.fieldAddDeleteBtn,onClick:function(){if(10!==te){ne(te+1);var e={title:i[0],measure:_[0],id:(0,l.nanoid)()},t=(0,s.Z)(Y);t.splice(0,0,e),H(t)}else x.Am.error("Maximum 10 ingredients can be added to the recipe")},disabled:te>=5,children:(0,f.jsx)(h.ueT,{size:30})})]})]}),Y&&0!==Y.length?(0,f.jsx)("ul",{className:u.ingredientList,children:Y.map((function(e){return(0,f.jsx)(g,{item:e,ingredientsList:i,onChange:se,handleDeleteIngredient:oe},e.id)}))}):(0,f.jsx)("p",{className:u.message,children:"No ingredients"}),(0,f.jsx)("h2",{className:u.ingredientsTitle,children:"Recipe Preparation"}),(0,f.jsx)("textarea",{className:u.instructionsfield,type:"text",name:"instructions",placeholder:"Enter the recipe",value:Q,onChange:ae}),(0,f.jsx)("button",{type:"submit",className:u.submitBtn,children:"Add"})]})]})},I=n(8314),L=n(6351),y=n(1087),z={noScroll:"AddRecipePopularContainer_noScroll__1DhqI",conteiner:"AddRecipePopularContainer_conteiner__KPqCW",follow_title:"AddRecipePopularContainer_follow_title__oau4n",recipes_title:"AddRecipePopularContainer_recipes_title__FwRwN",Card:"AddRecipePopularContainer_Card__T+3Qe",card_container:"AddRecipePopularContainer_card_container__XL15i",container_img:"AddRecipePopularContainer_container_img__+3XVv",recipe_name:"AddRecipePopularContainer_recipe_name__ILp4+",description:"AddRecipePopularContainer_description__62o+5"},E=n(7896),W=function(){var e=(0,p.I0)(),t=(0,p.v9)(L.AJ);return(0,r.useEffect)((function(){e((0,I.c)())}),[e]),(0,f.jsxs)("div",{children:[(0,f.jsx)("h2",{className:z.follow_title,children:"Follow Us"}),(0,f.jsx)(E.L,{}),(0,f.jsx)("h3",{className:z.recipes_title,children:"Popular recipe"}),(0,f.jsx)("ul",{className:z.Card,children:t.map((function(e){var t=e._id,n=e.drink,r=e.drinkAlternate,i=e.drinkThumb;return(0,f.jsxs)("li",{className:z.card_container,children:[(0,f.jsx)("div",{children:(0,f.jsx)("img",{src:i,alt:n,width:"90",className:z.container_img})}),(0,f.jsxs)("div",{className:z.recipe_name,children:[(0,f.jsx)(y.rU,{to:"/recipe/".concat(t),className:z.ingridient,children:n}),(0,f.jsx)("p",{className:z.description,children:r})]})]},t)}))})]})},U=function(){return(0,f.jsxs)("section",{className:i,children:[(0,f.jsx)("h1",{className:c,children:" Add recipe "}),(0,f.jsxs)("div",{className:a,children:[(0,f.jsx)(B,{}),(0,f.jsx)(W,{})]})]})}}}]);
//# sourceMappingURL=209.1d95d283.chunk.js.map