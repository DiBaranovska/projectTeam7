"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[77],{8028:function(e,t,n){n.d(t,{a5:function(){return o},bS:function(){return u},pX:function(){return l},wR:function(){return c}});var r=n(5861),a=n(4687),i=n.n(a),s=n(1243);s.Z.defaults.baseURL="https://projectteam7-backend.onrender.com";var c=function(){var e=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get("recipes/glass",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching glasses:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get("recipes/ingredients",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching ingredients:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get("recipes/category",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching categories:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get("/search",{params:n,headers:{Authorization:"Bearer ".concat(t)}});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},1077:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(2791),a=n(3433),i=n(9439),s=n(7689),c=n(8813),o={noScroll:"addRecipeForm_noScroll__eO3AL",conteiner:"addRecipeForm_conteiner__6kfsw"},u=n(9434),l=n(2466),d=n(1413),p=n(184),f=function(e){var t=e.item,n=e.ingredientsList,r=e.onChange,a=e.handleDeleteIngredient,i=function(e){var n=e.currentTarget,a=n.name,i=n.value;"title"===a?r((0,d.Z)((0,d.Z)({},t),{},{title:i})):"measure"===a&&r((0,d.Z)((0,d.Z)({},t),{},{measure:i}))};return(0,p.jsxs)("li",{className:o.contact__item,children:[(0,p.jsx)("select",{className:"title",name:"title",onChange:i,children:n.map((function(e){return(0,p.jsx)("option",{value:e,children:e},e)}))}),(0,p.jsx)("select",{className:"measureField",name:"measure",onChange:i,children:["1/2 oz","1/4 oz","3/4 oz","1 oz"].map((function(e){return(0,p.jsx)("option",{value:e,children:e},e)}))}),(0,p.jsx)("button",{type:"button",className:o.contact__deleteBtn,onClick:function(){a(t.id)},children:"Delete"})]})},h=n(3402),m=n(2635),g=n(514),v=n(7320),x=n(8028),j=n(5496),k=function(){var e=(0,u.I0)(),t=(0,u.v9)(v.rK),n=(0,s.s0)(),d=(0,u.v9)((function(e){return e.cocktail.ingredientsList})),k=(0,u.v9)((function(e){return e.cocktail.categoriesList})),b=(0,u.v9)((function(e){return e.cocktail.glassesList})),Z=["1/2 oz","1/4 oz","3/4 oz","1 oz"];(0,r.useEffect)((function(){console.log("useEffect"),t&&((0,x.a5)(t).then((function(t){t.sort(),e((0,j.Y1)(t))})).catch((function(e){return console.error("Error fetching ingredients:",e)})),(0,x.bS)(t).then((function(t){t.sort(),e((0,j.Zi)(t))})).catch((function(e){return console.error("Error fetching categories:",e)})),(0,x.wR)(t).then((function(t){t.sort(),e((0,j.xo)(t))})).catch((function(e){return console.error("Error fetching glasses:",e)})))}),[e,t]);var N=[{id:1,title:d[0],measure:Z[0]},{id:2,title:d[0],measure:Z[0]},{id:3,title:d[0],measure:Z[0]}],w=(0,r.useState)(""),_=(0,i.Z)(w,2),A=_[0],y=_[1],C=(0,r.useState)(""),S=(0,i.Z)(C,2),z=S[0],B=S[1],R=(0,r.useState)(""),E=(0,i.Z)(R,2),F=E[0],L=E[1],I=(0,r.useState)(""),D=(0,i.Z)(I,2),O=D[0],P=D[1],T=(0,r.useState)(""),U=(0,i.Z)(T,2),W=U[0],Y=U[1],J=(0,r.useState)(""),K=(0,i.Z)(J,2),M=K[0],V=K[1],X=(0,r.useState)([]),q=(0,i.Z)(X,2),G=q[0],H=q[1],Q=(0,r.useState)(3),$=(0,i.Z)(Q,2),ee=$[0],te=$[1],ne=(0,r.useRef)(),re=(0,r.useRef)();!G.length&&N[0].title&&H(N);var ae=function(e){var t=e.currentTarget,n=t.name,r=t.value,a=t.files,i=t.type;if("file"!==i||null!==a&&void 0!==a&&a[0]){if(Boolean(null===a||void 0===a?void 0:a[0]))if(!(a[0].name.endsWith(".jpg")||a[0].name.endsWith(".png")||a[0].name.endsWith(".jpeg")))return alert("Only jpg/jpeg and png files are allowed!");"drink"===n?y(r):"drinkAlternate"===n?B(r):"category"===n?L(r):"glass"===n?P(r):"instructions"===n?Y(r):"file"===i?V(null===a||void 0===a?void 0:a[0]):"ingredients"===n&&H(r)}},ie=function(){y(""),B(""),L(k[0]),P(b[0]),Y(""),V(""),H(N),te(3)},se=function(e){var t=(0,a.Z)(G),n=t.findIndex((function(t){return t.id===e.id}));t.splice(n,1,e),H(t)},ce=function(e){if(1!==ee){var t=(0,a.Z)(G),n=t.findIndex((function(t){return t.id===e}));t.splice(n,1),H(t),console.log("ingredients",G),te(ee-1)}else h.Am.error("At least 1 ingredient should be in the recipe")};return(0,p.jsxs)("form",{ref:ne,className:o.addForm,onSubmit:function(t){t.preventDefault();var r={drink:A,drinkAlternate:z,category:F||k[0],glass:O||b[0],instructions:W,ingredients:G.map((function(e){return{title:e.title,measure:e.measure}}))},a=new FormData;a.append("data",JSON.stringify(r)),a.append("drinkThumb",M),e((0,l.e2)(a)).unwrap().then((function(e){var t=e._id;ie(),h.Am.success("Recipe is added."),n("/recipe/".concat(t),{replace:!0})})).catch((function(t){t.message.includes("401")?(e((0,m.kS)()),h.Am.error("Your session is over. Log In again.")):h.Am.error("Some error happened :(")}))},children:[(0,p.jsxs)("div",{className:o.recipePhoto,children:[(0,p.jsx)("img",{className:o.recipeImg,src:M,alt:"Recipe"}),(0,p.jsx)("img",{className:o.addPhotoBtn,src:g,alt:"Add button",onClick:function(){re.current.click()}}),(0,p.jsx)("input",{className:o.file,ref:re,type:"file",name:"photoURL",accept:".jpg, .jpeg, .png",onChange:ae,defaultValue:M}),(0,p.jsx)("p",{children:"Add image"})]}),(0,p.jsx)("input",{className:"drinkfield",type:"text",name:"drink",value:A,onChange:ae}),(0,p.jsx)("input",{className:"drinkAlternateField",type:"text",name:"drinkAlternate",value:z,onChange:ae}),(0,p.jsx)("select",{className:"categoryField",name:"category",value:F,onChange:ae,children:k.map((function(e){return(0,p.jsx)("option",{value:e,children:e},e)}))}),(0,p.jsx)("select",{className:"glassField",name:"glass",value:O,onChange:ae,children:b.map((function(e){return(0,p.jsx)("option",{value:e,children:e},e)}))}),(0,p.jsx)("button",{type:"button",className:o.contact__deleteBtn,onClick:function(){if(10!==ee){te(ee+1);var e={title:d[0],measure:Z[0],id:(0,c.nanoid)()},t=(0,a.Z)(G);t.splice(0,0,e),H(t)}else h.Am.error("Maximum 10 ingredients can be added to the recipe")},children:"+"}),(0,p.jsx)("p",{children:ee}),(0,p.jsx)("button",{type:"button",className:o.contact__deleteBtn,onClick:function(){if(1!==ee){te(ee-1);var e=(0,a.Z)(G);e.splice(0,1),H(e)}else h.Am.error("At least 1 ingredient should be in the recipe")},children:"-"}),G&&0!==G.length?(0,p.jsx)("ul",{className:o.contact__list,children:G.map((function(e){return(0,p.jsx)(f,{item:e,ingredientsList:d,onChange:se,handleDeleteIngredient:ce},e.id)}))}):(0,p.jsx)("p",{className:o.message,children:"No contacts"}),(0,p.jsx)("input",{className:"instructionsfield",type:"text",name:"instructions",value:W,onChange:ae}),(0,p.jsx)("button",{type:"submit",className:o.contact__deleteBtn,children:"Add recipe"})]})},b=function(){return(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{className:"{css.title}",children:" Add recipe "}),(0,p.jsx)(k,{}),(0,p.jsx)("h2",{className:"{css.subtitle}",children:"Follow Us"}),(0,p.jsx)("h2",{className:"{css.subtitle}",children:"Popular recipe"})]})}}}]);
//# sourceMappingURL=77.438d478c.chunk.js.map