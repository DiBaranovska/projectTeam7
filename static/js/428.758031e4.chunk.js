"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[428],{5235:function(e,r,n){n.r(r),n.d(r,{default:function(){return z}});var t=n(5861),i=n(9439),a=n(4687),s=n.n(a),c=n(2791),o=n(9434),d=n(1243);d.Z.defaults.baseURL="https://projectteam7-backend.onrender.com";var p=function(){var e=(0,t.Z)(s().mark((function e(r,n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.get("recipes/".concat(r),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("An error occurred:",e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,n){return e.apply(this,arguments)}}(),l=function(){var e=(0,t.Z)(s().mark((function e(r,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://projectteam7-backend.onrender.com/favorite",e.next=3,fetch("https://projectteam7-backend.onrender.com/favorite",{method:"POST",headers:{accept:"application/json",Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({id:r})});case 3:e.sent.ok?console.log("Recipe added to favorites"):console.error("Failed to add recipe to favorites");case 5:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),_=function(){var e=(0,t.Z)(s().mark((function e(r,n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://projectteam7-backend.onrender.com/favorite/".concat(r),e.next=3,fetch(t,{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}});case 3:e.sent.ok?console.log("Recipe removed from favorites"):console.error("Failed to remove recipe from favorites");case 5:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),u="RecipePage_conteiner__Vl14l",f="RecipePage_recipe__conteiner__hYPxr",m="recipeInngredientsList_ingredients__qqVfR",h="recipeInngredientsList_ingredients__title__TKn3w",g="recipeInngredientsList_ingredients__list__n0ct7",v="recipeInngredientsList_ingredients__card__I1pSf",x="recipeInngredientsList_ingredients__card__background__JiQJc",k="recipeInngredientsList_ingredients__card__img__tLTMZ",j="recipeInngredientsList_ingredients__card__description__5lH5Y",b="recipeInngredientsList_ingredients__card__title__3uV7Z",N="recipeInngredientsList_ingredients__card__measure__Q0UN2",P=n(184),w=function(e){var r=e.ingredients;return(0,P.jsxs)("div",{className:m,children:[(0,P.jsx)("h2",{className:h,children:"Ingredients"}),(0,P.jsx)("ul",{className:g,children:r.map((function(e,r){return(0,P.jsxs)("li",{className:v,children:[(0,P.jsx)("div",{className:x,children:e.ingredientThumb&&(0,P.jsx)("img",{src:e.ingredientThumb,alt:e.title,className:k})}),(0,P.jsxs)("div",{className:j,children:[(0,P.jsx)("p",{className:b,children:e.title}),e.measure&&(0,P.jsx)("p",{className:N,children:e.measure})]})]},r)}))})]})},I="recipePreparation_preparation__ejNBK",T="recipePreparation_preparation__title__k7PDp",R="recipePreparation_preparation__container__vbwqW",S="recipePreparation_preparation__description__HsEFR",Z="recipePreparation_preparation__imageContainer__pW-bi",A="recipePreparation_preparation__img__Yu-Lq",L=n.p+"static/media/recipePreparation.40381256e2b33149bbd3.jpg",y=function(e){var r=e.instructions;return(0,P.jsxs)("div",{className:I,children:[(0,P.jsx)("h2",{className:T,children:"Recipe Preparation"}),(0,P.jsxs)("div",{className:R,children:[(0,P.jsx)("p",{className:S,children:r}),(0,P.jsx)("div",{className:Z,children:(0,P.jsx)("img",{src:L,alt:"Recipe Preparation",className:A})})]})]})},H="recipePageHero_field__GVC5K",F="recipePageHero_field__glass__AMbFk",C="recipePageHero_field__drink__RSugn",E="recipePageHero_field__description__+0Wbp",J="recipePageHero_field__button__Ftv3-",q="recipePageHero_field__button_text__pwBve",B="recipePageHero_field__imageContainer__FN9Yw",O="recipePageHero_field__img__RpPxq",D=n.p+"static/media/recipeCocteile.6b53d13bfa3bde5a7824.jpg",V=function(e){var r=e.glass,n=e.drinkAlternate,a=e.drink,d=e.drinkThumb,p=e.recipeId,u=(0,c.useState)(!1),f=(0,i.Z)(u,2),m=f[0],h=f[1],g=(0,o.v9)((function(e){return e.user.token}));(0,c.useEffect)((function(){try{var e=localStorage.getItem("favoriteRecipes"),r=(JSON.parse(e)||{recipes:[]}).recipes,n=p,t=r.some((function(e){return e._id===n}));h(t)}catch(i){console.error("Failed to fetch favorite status:",i)}}),[p,g]);var v=function(){var e=(0,t.Z)(s().mark((function e(){var r,n,t,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=localStorage.getItem("favoriteRecipes"),n=JSON.parse(r)||{recipes:[]},t=n.recipes,i=p,t.some((function(e){return e._id===i}))){e.next=13;break}return e.next=9,l(p,g);case 9:h(!0),t.push({_id:i}),e.next=18;break;case 13:return e.next=15,_(p,g);case 15:h(!1),-1!==(a=t.findIndex((function(e){return e._id===i})))&&t.splice(a,1);case 18:localStorage.setItem("favoriteRecipes",JSON.stringify(n)),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("Failed to toggle favorite:",e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();return(0,P.jsxs)("div",{className:H,children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{className:F,children:r}),(0,P.jsx)("h1",{className:C,children:a}),(0,P.jsx)("p",{className:E,children:n}),(0,P.jsx)("button",{className:J,onClick:v,children:(0,P.jsx)("span",{className:q,children:m?"Remove from favorite":"Add to favorite recipe"})})]}),(0,P.jsx)("div",{className:B,children:d?(0,P.jsx)("img",{src:d,alt:"Drink Thumbnail",className:O}):(0,P.jsx)("img",{src:D,alt:"Drink Thumbnail",className:O})})]})},Y=n(7173);var z=function(){var e=(0,c.useState)(""),r=(0,i.Z)(e,2),n=r[0],a=r[1],d=(0,c.useState)({drink:"",drinkAlternate:"",glass:"",drinkThumb:"",ingredients:[],instructions:""}),l=(0,i.Z)(d,2),_=l[0],m=l[1],h=(0,c.useState)(!0),g=(0,i.Z)(h,2),v=g[0],x=g[1],k=(0,o.v9)((function(e){return e.user.token})),j=(0,c.useState)(null),b=(0,i.Z)(j,2),N=b[0],I=b[1];(0,c.useEffect)((function(){I(k)}),[k]),(0,c.useEffect)((function(){if(N){var e=window.location.pathname.split("/"),r=e[e.length-1];a(r);var n=function(){var e=(0,t.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(r,N);case 3:(n=e.sent)&&(m({drink:n.drink,drinkAlternate:n.drinkAlternate,glass:n.glass,drinkThumb:n.drinkThumb,ingredients:n.ingredients,instructions:n.instructions}),x(!1)),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("An error occurred:",e.t0),console.log("Token:",N),x(!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();n()}}),[N]),(0,c.useEffect)((function(){window.scrollTo(0,0)}),[n]);var T=_.drink,R=_.drinkAlternate,S=_.glass,Z=_.drinkThumb,A=_.ingredients,L=_.instructions;return(0,P.jsx)("div",{className:"".concat(u," ").concat(f),children:v?(0,P.jsx)(Y.Z,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(V,{glass:S,drinkAlternate:R,drink:T,drinkThumb:Z,recipeId:n}),(0,P.jsx)(w,{ingredients:A}),(0,P.jsx)(y,{instructions:L})]})})}}}]);
//# sourceMappingURL=428.758031e4.chunk.js.map