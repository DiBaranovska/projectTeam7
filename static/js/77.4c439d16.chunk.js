"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[77],{8028:function(e,n,t){t.d(n,{a5:function(){return o},bS:function(){return u},pX:function(){return l},wR:function(){return c}});var r=t(5861),a=t(4687),i=t.n(a),s=t(1243);s.Z.defaults.baseURL="https://projectteam7-backend.onrender.com";var c=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get("recipes/glass",{headers:{Authorization:"Bearer ".concat(n)}});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching glasses:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),o=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get("recipes/ingredients",{headers:{Authorization:"Bearer ".concat(n)}});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching ingredients:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get("recipes/category",{headers:{Authorization:"Bearer ".concat(n)}});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching categories:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(i().mark((function e(n,t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get("/search",{params:t,headers:{Authorization:"Bearer ".concat(n)}});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}()},1077:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var r=t(2791),a=t(3433),i=t(9439),s=t(8813),c={noScroll:"addRecipeForm_noScroll__eO3AL",conteiner:"addRecipeForm_conteiner__6kfsw"},o=t(9434),u=t(2466),l=t(184),d=function(e){var n=e.item,t=e.ingredientsList,a=e.onChange,s=e.handleDeleteIngredient,o=n.id,u=n.titleItem,d=n.measureItem,p=(0,r.useState)(u),h=(0,i.Z)(p,2),f=h[0],m=h[1],g=(0,r.useState)(d),v=(0,i.Z)(g,2),x=v[0],j=v[1],k=function(e){var n=e.currentTarget,t=n.name,r=n.value;"title"===t?m(r):"measure"===t&&j(r),a({id:o,title:f,measure:x})};return(0,l.jsxs)("li",{className:c.contact__item,children:[(0,l.jsx)("select",{className:"title",name:"title",value:f,onChange:k,children:t.map((function(e){return(0,l.jsx)("option",{value:e,children:e},e)}))}),(0,l.jsx)("select",{className:"measureField",name:"measure",value:x,onChange:k,children:["1/2 oz","1/4 oz","3/4 oz","1 oz"].map((function(e){return(0,l.jsx)("option",{value:e,children:e},e)}))}),(0,l.jsx)("button",{type:"button",className:c.contact__deleteBtn,onClick:function(){s(o)},children:"Delete"})]})},p=t(3402),h=t(2635),f=t(514),m=t(7320),g=t(8028),v=t(5496),x=function(){var e=(0,o.I0)(),n=(0,o.v9)(m.rK),t=(0,o.v9)((function(e){return e.cocktail.ingredientsList})),x=(0,o.v9)((function(e){return e.cocktail.categoriesList})),j=(0,o.v9)((function(e){return e.cocktail.glassesList})),k=["1/2 oz","1/4 oz","3/4 oz","1 oz"];(0,r.useEffect)((function(){n&&((0,g.a5)(n).then((function(n){n.sort(),e((0,v.Y1)(n))})).catch((function(e){return console.error("Error fetching ingredients:",e)})),(0,g.bS)(n).then((function(n){n.sort(),e((0,v.Zi)(n))})).catch((function(e){return console.error("Error fetching categories:",e)})),(0,g.wR)(n).then((function(n){n.sort(),e((0,v.xo)(n))})).catch((function(e){return console.error("Error fetching glasses:",e)})))}),[e,n]);var Z=[{title:"",measure:k[0],id:1},{title:"",measure:k[0],id:2},{title:"",measure:k[0],id:3}],b=(0,r.useState)(""),w=(0,i.Z)(b,2),N=w[0],_=w[1],y=(0,r.useState)(""),S=(0,i.Z)(y,2),C=S[0],A=S[1],z=(0,r.useState)(x[0]),I=(0,i.Z)(z,2),B=I[0],R=I[1],E=(0,r.useState)(j[0]),F=(0,i.Z)(E,2),L=F[0],D=F[1],P=(0,r.useState)(""),T=(0,i.Z)(P,2),U=T[0],W=T[1],O=(0,r.useState)(""),Y=(0,i.Z)(O,2),K=Y[0],V=Y[1],X=(0,r.useState)(Z),q=(0,i.Z)(X,2),G=q[0],H=q[1],J=(0,r.useState)(3),M=(0,i.Z)(J,2),Q=M[0],$=M[1],ee=(0,r.useRef)(),ne=(0,r.useRef)(),te=function(e){var n=e.currentTarget,t=n.name,r=n.value,a=n.files,i=n.type;if("file"!==i||null!==a&&void 0!==a&&a[0]){if(Boolean(null===a||void 0===a?void 0:a[0]))if(!(a[0].name.endsWith(".jpg")||a[0].name.endsWith(".png")||a[0].name.endsWith(".jpeg")))return alert("Only jpg/jpeg and png files are allowed!");"drink"===t?_(r):"drinkAlternate"===t?A(r):"category"===t?R(r):"glass"===t?D(r):"instructions"===t?W(r):"file"===i?V(null===a||void 0===a?void 0:a[0]):"ingredients"===t&&H(r)}},re=function(){_(""),A(""),R(""),D(""),W(""),V(""),H("")},ae=function(e){console.log("handleChangeIngredient"),console.log("item",e);var n=(0,a.Z)(G),t=n.findIndex((function(n){return n.id===e.id}));n.splice(t,1,e),H(n),console.log("ingredients",G)},ie=function(e){console.log("handleDeleteIngredient"),console.log("id",e);var n=(0,a.Z)(G),t=n.findIndex((function(n){return n.id===e}));n.splice(t,1),H(n),console.log("ingredients",G)};return(0,l.jsxs)("form",{ref:ee,className:c.addForm,onSubmit:function(n){n.preventDefault();var t=new FormData;t.append("drink",N),t.append("drinkAlternate",C),t.append("category",B),t.append("glass",L),t.append("instructions",U),t.append("drinkThumb",K),t.append("ingredients[0][title]","Sherry"),t.append("ingredients[0][measure]","10 ml"),t.append("ingredients[1][title]","Egg"),t.append("ingredients[1][measure]","1 cl"),e((0,u.e2)(t)).unwrap().then((function(){re(),p.Am.success("Recipe is added.")})).catch((function(n){n.message.includes("401")?(e((0,h.kS)()),p.Am.error("Your session is over. Log In again.")):p.Am.error("Some error happened :(")}))},children:[(0,l.jsxs)("div",{className:c.recipePhoto,children:[(0,l.jsx)("img",{className:c.recipeImg,src:K,alt:"Recipe"}),(0,l.jsx)("img",{className:c.addPhotoBtn,src:f,alt:"Add button",onClick:function(){ne.current.click()}}),(0,l.jsx)("input",{className:c.file,ref:ne,type:"file",name:"photoURL",accept:".jpg, .jpeg, .png",onChange:te,defaultValue:K}),(0,l.jsx)("p",{children:"Add image"})]}),(0,l.jsx)("input",{className:"drinkfield",type:"text",name:"drink",value:N,onChange:te}),(0,l.jsx)("input",{className:"drinkAlternateField",type:"text",name:"drinkAlternate",value:C,onChange:te}),(0,l.jsx)("select",{className:"categoryField",name:"category",value:B,onChange:te,children:x.map((function(e){return(0,l.jsx)("option",{value:e,children:e},e)}))}),(0,l.jsx)("select",{className:"glassField",name:"glass",value:L,onChange:te,children:j.map((function(e){return(0,l.jsx)("option",{value:e,children:e},e)}))}),(0,l.jsx)("button",{type:"button",className:c.contact__deleteBtn,onClick:function(){$(Q+1);var e={title:"",measure:k[0],id:(0,s.nanoid)()},n=(0,a.Z)(G);n.splice(0,0,e),H(n)},children:"+"}),(0,l.jsx)("p",{children:Q}),(0,l.jsx)("button",{type:"button",className:c.contact__deleteBtn,onClick:function(){$(Q-1);var e=(0,a.Z)(G);e.splice(0,1),H(e)},children:"-"}),G&&0!==G.length?(0,l.jsx)("ul",{className:c.contact__list,children:G.map((function(e){return(0,l.jsx)(d,{item:e,ingredientsList:t,onChange:ae,handleDeleteIngredient:ie},e.id)}))}):(0,l.jsx)("p",{className:c.message,children:"No contacts"}),(0,l.jsx)("input",{className:"instructionsfield",type:"text",name:"instructions",value:U,onChange:te}),(0,l.jsx)("button",{type:"submit",className:c.contact__deleteBtn,children:"Add recipe"})]})},j=function(){return(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"{css.title}",children:" Add recipe "}),(0,l.jsx)(x,{}),(0,l.jsx)("h2",{className:"{css.subtitle}",children:"Follow Us"}),(0,l.jsx)("h2",{className:"{css.subtitle}",children:"Popular recipe"})]})}}}]);
//# sourceMappingURL=77.4c439d16.chunk.js.map